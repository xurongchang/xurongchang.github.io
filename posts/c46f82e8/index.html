<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>MySQL数据库总结 | 邶风の博客 | BEIFENG</title><meta name="keywords" content="mysql"><meta name="author" content="邶风"><meta name="copyright" content="邶风"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="一、引言1.1 现有的数据存储方式有哪些？  Java程序存储数据(变量、对象、数组、集合)，数据保存在内存中，属于瞬时状态存储。 文件（File）存储数据，保存在硬盘上，属于持久状态存储。   1.2 以上存储方式存在哪些缺点？  没有数据类型的区分。 存储数据量级较小。 没有访问安全限制。 没有备份、恢复机制。   二、数据库2.1 概念 数据库是“按照数据结构来组织、存储和管理数据的仓库。是">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL数据库总结">
<meta property="og:url" content="https://xurongchang.github.io/posts/c46f82e8/index.html">
<meta property="og:site_name" content="邶风の博客 | BEIFENG">
<meta property="og:description" content="一、引言1.1 现有的数据存储方式有哪些？  Java程序存储数据(变量、对象、数组、集合)，数据保存在内存中，属于瞬时状态存储。 文件（File）存储数据，保存在硬盘上，属于持久状态存储。   1.2 以上存储方式存在哪些缺点？  没有数据类型的区分。 存储数据量级较小。 没有访问安全限制。 没有备份、恢复机制。   二、数据库2.1 概念 数据库是“按照数据结构来组织、存储和管理数据的仓库。是">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/03/25/4Kdht3giQJaqlmP.jpg">
<meta property="article:published_time" content="2021-03-25T13:25:40.000Z">
<meta property="article:modified_time" content="2021-03-26T09:30:35.067Z">
<meta property="article:author" content="邶风">
<meta property="article:tag" content="mysql">
<meta property="article:tag" content="数据库">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/03/25/4Kdht3giQJaqlmP.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://xurongchang.github.io/posts/c46f82e8/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?7b6cd57f7be69582f3fe309d427bbbe2";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: {"limitDay":120,"position":"top","messagePrev":"本文最后一次更新为","messageNext":"天前,文章的内容可能已过时！"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-03-26 17:30:35'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="邶风の博客 | BEIFENG" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">26</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page" href="/file/"><i class="fa-fw fas fa-file-alt"></i><span> 文件</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2021/03/25/4Kdht3giQJaqlmP.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">邶风の博客 | BEIFENG</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page" href="/file/"><i class="fa-fw fas fa-file-alt"></i><span> 文件</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">MySQL数据库总结</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-25T13:25:40.000Z" title="发表于 2021-03-25 21:25:40">2021-03-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-26T09:30:35.067Z" title="更新于 2021-03-26 17:30:35">2021-03-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/">中间件</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/MySQL/">MySQL</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>32分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="一、引言"><a href="#一、引言" class="headerlink" title="一、引言"></a>一、引言</h1><h2 id="1-1-现有的数据存储方式有哪些？"><a href="#1-1-现有的数据存储方式有哪些？" class="headerlink" title="1.1 现有的数据存储方式有哪些？"></a>1.1 现有的数据存储方式有哪些？</h2><blockquote>
<ul>
<li>Java程序存储数据(变量、对象、数组、集合)，数据保存在内存中，属于瞬时状态存储。</li>
<li>文件（File）存储数据，保存在硬盘上，属于持久状态存储。</li>
</ul>
</blockquote>
<h2 id="1-2-以上存储方式存在哪些缺点？"><a href="#1-2-以上存储方式存在哪些缺点？" class="headerlink" title="1.2 以上存储方式存在哪些缺点？"></a>1.2 以上存储方式存在哪些缺点？</h2><blockquote>
<ul>
<li>没有数据类型的区分。</li>
<li>存储数据量级较小。</li>
<li>没有访问安全限制。</li>
<li>没有备份、恢复机制。</li>
</ul>
</blockquote>
<h1 id="二、数据库"><a href="#二、数据库" class="headerlink" title="二、数据库"></a>二、数据库</h1><h2 id="2-1-概念"><a href="#2-1-概念" class="headerlink" title="2.1 概念"></a>2.1 概念</h2><blockquote>
<p>数据库是“按照数据结构来组织、存储和管理数据的仓库。是一个长期存储在计算机内的、有组织的、有共享的、统一管理的数据集合。</p>
</blockquote>
<h2 id="2-2-数据库的分类"><a href="#2-2-数据库的分类" class="headerlink" title="2.2 数据库的分类"></a>2.2 数据库的分类</h2><blockquote>
<ul>
<li>网状结构数据库：美国通用电气公司IDS(Integrated Data Store)，以节点形式存储和访问。</li>
<li>层次结构数据库：IBM公司IMS(Information Management System),定向有序的树状结构实现存储和访问。</li>
<li>关系结构数据库：Oracle、DB2、MySQL、SQL Server，以表格(Table) 存储，多表间建立关联关系，通过分类、合并、连接、选取等运算实现访问。</li>
<li>非关系型数据库：ElastecSearch、MongoDB、Redis。多数使用哈希表，表中以键值(key-value) 的方式实现特定的键和一个指针指向的特定数据。</li>
</ul>
</blockquote>
<h1 id="三、MySQL"><a href="#三、MySQL" class="headerlink" title="三、MySQL"></a>三、MySQL</h1><h2 id="4-1-简介"><a href="#4-1-简介" class="headerlink" title="4.1 简介"></a>4.1 简介</h2><blockquote>
<p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB公司开发，属于 Oracle 旗下产品。</p>
</blockquote>
<h2 id="4-2-访问与下载"><a href="#4-2-访问与下载" class="headerlink" title="4.2 访问与下载"></a>4.2 访问与下载</h2><blockquote>
<p>官方网站：<a target="_blank" rel="noopener" href="https://www.mysql.com/">https://www.mysql.com/</a></p>
<p>下载地址：<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a></p>
</blockquote>
<h2 id="4-3-MySQL-目录结构"><a href="#4-3-MySQL-目录结构" class="headerlink" title="4.3 MySQL 目录结构"></a>4.3 MySQL 目录结构</h2><blockquote>
<p>核心文件介绍</p>
</blockquote>
<table>
<thead>
<tr>
<th>文件夹名称</th>
<th>内容</th>
</tr>
</thead>
<tbody><tr>
<td>bin</td>
<td>命令文件</td>
</tr>
<tr>
<td>lib</td>
<td>库文件</td>
</tr>
<tr>
<td>include</td>
<td>头文件</td>
</tr>
<tr>
<td>Share</td>
<td>字符集、语言等信息</td>
</tr>
</tbody></table>
<h2 id="4-4-MySQL配置文件"><a href="#4-4-MySQL配置文件" class="headerlink" title="4.4 MySQL配置文件"></a>4.4 MySQL配置文件</h2><blockquote>
<p>在MySQL安装目录中找到my.ini文件，并打开my.ini文件查看几个常用配置参数</p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>default-character-set</td>
<td>客户端默认字符集</td>
</tr>
<tr>
<td>character-set-server</td>
<td>服务端默认字符集</td>
</tr>
<tr>
<td>port</td>
<td>客户端和服务器端的端口号</td>
</tr>
<tr>
<td>default-storage-engin</td>
<td>MySQL默认存储引擎 INNODB</td>
</tr>
</tbody></table>
<h1 id="四、SQL语言"><a href="#四、SQL语言" class="headerlink" title="四、SQL语言"></a>四、SQL语言</h1><h2 id="4-1-概念"><a href="#4-1-概念" class="headerlink" title="4.1 概念"></a>4.1 概念</h2><blockquote>
<p>SQL(Structured Query Language) 结构化查询语言，用于存储、更新、查询和管理关系数据库系统的程序设计语言。</p>
</blockquote>
<h2 id="4-2-MySQL应用"><a href="#4-2-MySQL应用" class="headerlink" title="4.2 MySQL应用"></a>4.2 MySQL应用</h2><blockquote>
<p>对于数据库的操作，需要在进入MySQL环境下进行指令输入，并在一句指令的末尾使用 ； 结束</p>
</blockquote>
<h2 id="4-3-基本命令"><a href="#4-3-基本命令" class="headerlink" title="4.3 基本命令"></a>4.3 基本命令</h2><blockquote>
<p>查看MySQL中所有数据库</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW DATABASES; # 显示当前MySQL中包含的所以数据库</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>数据库</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>information_schema</td>
<td>信息数据库，其中保存着关于所以数据库信息(元数据)。元数据是关于数据的数据，如数据库名或表名，列的数据类型，或访问权限等。</td>
</tr>
<tr>
<td>mysql</td>
<td>核心数据库，主要负责存储数据库的用户、权限设置、关键字等，以及需要使用的控制和管理信息，不可以删除。</td>
</tr>
<tr>
<td>performance_schema</td>
<td>性能优化的数据库，MySQL 5.5版本中新增的一个性能优化的引擎。</td>
</tr>
<tr>
<td>sys</td>
<td>系统数据库，MySQL 5.7 版本中新增的可以快速的了解元数据信息的系统数据库便于发现数据库的多样信息，解决性能瓶颈问题</td>
</tr>
</tbody></table>
<blockquote>
<p>创建自定义数据库</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database mydb1; # 创建mydb1数据库</span><br><span class="line">mysql&gt; create database mydb2 character set gbk; # 创建数据库并设置编码格式为gbk</span><br><span class="line">mysql&gt; create database if not exists mydb3; # 如果mydb4数据库不存在，则创建；如果存在，则不创建。</span><br></pre></td></tr></table></figure>



<blockquote>
<p>查看数据库创建信息</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show create database mydb1; # 查看创建数据库时的基本信息</span><br></pre></td></tr></table></figure>



<blockquote>
<p>修改数据库</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; alter database mydb1 character set gbk; # 修改数据库的字符编码为gbk</span><br></pre></td></tr></table></figure>



<blockquote>
<p>删除数据库</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; drop database mydb1; # 删除数据库mydb1</span><br></pre></td></tr></table></figure>



<blockquote>
<p>查看当前所使用的数据库</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select database(); # 查看当前所使用的数据库</span><br></pre></td></tr></table></figure>



<blockquote>
<p>使用数据库</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mydb1; # 使用数据库</span><br></pre></td></tr></table></figure>





<h1 id="五、数据查询【重点】"><a href="#五、数据查询【重点】" class="headerlink" title="五、数据查询【重点】"></a>五、数据查询【重点】</h1><h2 id="5-1-数据库表的基本结构"><a href="#5-1-数据库表的基本结构" class="headerlink" title="5.1 数据库表的基本结构"></a>5.1 数据库表的基本结构</h2><blockquote>
<p>关系结构数据库是以表格进行数据存储，表格由”行“和”列“组成</p>
</blockquote>
<ul>
<li><strong>注意：==执行查询语句返回的结果集是一张虚拟表。==</strong></li>
</ul>
<h2 id="5-2-基本查询"><a href="#5-2-基本查询" class="headerlink" title="5.2 基本查询"></a>5.2 基本查询</h2><blockquote>
<p>语法：select    列名    from    表名</p>
</blockquote>
<h3 id="5-2-1-查询部分列"><a href="#5-2-1-查询部分列" class="headerlink" title="5.2.1 查询部分列"></a>5.2.1 查询部分列</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询员工表中所有员工的编号、名字、邮箱</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,email <span class="keyword">from</span> t_employees;</span><br></pre></td></tr></table></figure>



<h3 id="5-2-2-查询所有列"><a href="#5-2-2-查询所有列" class="headerlink" title="5.2.2 查询所有列"></a>5.2.2 查询所有列</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询员工表中所有员工的所有信息(所有列)</span></span><br><span class="line"><span class="keyword">select</span> 所有列的列名 <span class="keyword">from</span> t_employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_employees;</span><br></pre></td></tr></table></figure>

<ul>
<li>*<em>注意：==生产环境下，优先使用列名查询。</em> 的方式需要转换成列名，效率低，可读性差。==**</li>
</ul>
<h3 id="5-5-3-对列中的数据进行运算"><a href="#5-5-3-对列中的数据进行运算" class="headerlink" title="5.5.3 对列中的数据进行运算"></a>5.5.3 对列中的数据进行运算</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询员工表中所有员工的编号、名字、年薪</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary*<span class="number">12</span> <span class="keyword">from</span> t_employees;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>算术运算符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>+</td>
<td>两列做加法运算</td>
</tr>
<tr>
<td>-</td>
<td>两列做减法运算</td>
</tr>
<tr>
<td>*</td>
<td>两列做乘法运算</td>
</tr>
<tr>
<td>/</td>
<td>两列做除法运算</td>
</tr>
</tbody></table>
<ul>
<li>注意：% 是占位符，而非模运算符。</li>
</ul>
<h3 id="5-3-4-列的别名"><a href="#5-3-4-列的别名" class="headerlink" title="5.3.4 列的别名"></a>5.3.4 列的别名</h3><blockquote>
<p> 语法：列 as “别名”</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询员工表中所有员工的编号、名字、年薪(列名均为中文)</span></span><br><span class="line"><span class="keyword">select</span> employee_id <span class="keyword">as</span> <span class="string">&quot;编号&quot;</span>,first_name <span class="keyword">as</span> <span class="string">&quot;名字&quot;</span>,salary*<span class="number">12</span> <span class="keyword">as</span> <span class="string">&quot;年薪&quot;</span> <span class="keyword">from</span> t_employees; </span><br></pre></td></tr></table></figure>



<h3 id="5-3-5-查询结果去重"><a href="#5-3-5-查询结果去重" class="headerlink" title="5.3.5 查询结果去重"></a>5.3.5 查询结果去重</h3><blockquote>
<p>DISTINCT 列名</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询员工表中所有经理的ID</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> manager_id <span class="keyword">from</span> t_employees;</span><br></pre></td></tr></table></figure>



<h2 id="5-3-排序查询"><a href="#5-3-排序查询" class="headerlink" title="5.3 排序查询"></a>5.3 排序查询</h2><blockquote>
<p>语法：select 列名 from 表名 order by 排序列 [排序规则]</p>
</blockquote>
<table>
<thead>
<tr>
<th>排序规则</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>ASC</td>
<td>对前面排序列做升序排序</td>
</tr>
<tr>
<td>DESC</td>
<td>对前面排序列做降序排序</td>
</tr>
</tbody></table>
<h3 id="5-3-1-依据单列排序"><a href="#5-3-1-依据单列排序" class="headerlink" title="5.3.1 依据单列排序"></a>5.3.1 依据单列排序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询员工的编号，名字，薪资。按照工资高低进行降序排序</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>



<h3 id="5-3-2-依据多列排序"><a href="#5-3-2-依据多列排序" class="headerlink" title="5.3.2 依据多列排序"></a>5.3.2 依据多列排序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询员工的编号，名字，薪资。按照工资高低进行升序排序(薪资相同时，按照编号进行升序排序)</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>,employee_id <span class="keyword">asc</span>;</span><br></pre></td></tr></table></figure>



<h2 id="5-4-条件查询"><a href="#5-4-条件查询" class="headerlink" title="5.4 条件查询"></a>5.4 条件查询</h2><blockquote>
<p>语法：select 列名 from 表名 where 条件</p>
</blockquote>
<table>
<thead>
<tr>
<th>关键字</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>where 条件</td>
<td>在查询结果中，筛选符合条件的查询结果，条件为布尔表达式</td>
</tr>
</tbody></table>
<h3 id="5-4-1-等值判断"><a href="#5-4-1-等值判断" class="headerlink" title="5.4.1 等值判断(=)"></a>5.4.1 等值判断(=)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询薪资是11000的员工信息(编号，名字，薪资)</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">where</span> salary = <span class="number">11000</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：与java不同(==),mysql 中等值判断使用 =</strong> </li>
</ul>
<h3 id="5-4-2-逻辑判断-and、or、not"><a href="#5-4-2-逻辑判断-and、or、not" class="headerlink" title="5.4.2 逻辑判断(and、or、not)"></a>5.4.2 逻辑判断(and、or、not)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询薪资是11000并且提成是0.30的员工信息(编号、名字、薪资)</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">where</span> salary = <span class="number">11000</span> <span class="keyword">and</span> commission_pct = <span class="number">0.30</span></span><br></pre></td></tr></table></figure>



<h3 id="5-4-3-不等值判断-gt-、-lt-、-gt-、-lt-、"><a href="#5-4-3-不等值判断-gt-、-lt-、-gt-、-lt-、" class="headerlink" title="5.4.3 不等值判断(&gt;、&lt;、&gt;=、&lt;=、!=)"></a>5.4.3 不等值判断(&gt;、&lt;、&gt;=、&lt;=、!=)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询员工的薪资在6000~10000之间的员工信息(编号、名字、薪资)</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">where</span> salary &gt;= <span class="number">6000</span> <span class="keyword">and</span> salary &lt;= <span class="number">10000</span></span><br></pre></td></tr></table></figure>



<h3 id="5-4-4-区间判断-betwee-and"><a href="#5-4-4-区间判断-betwee-and" class="headerlink" title="5.4.4 区间判断(betwee and)"></a>5.4.4 区间判断(betwee and)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询员工的薪资在6000~10000之间的员工信息(编号、名字、薪资)</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">where</span> salary betwee  <span class="number">6000</span> <span class="keyword">and</span> <span class="number">10000</span>; <span class="comment"># 闭区间，包含区间边界的两个值</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==在区间判断语法中，小值在前，大值在后，反之，得不到正确的结果==</strong></li>
</ul>
<h3 id="5-4-5-NULL值判断-IS-NULL、IS-NOT-NULL"><a href="#5-4-5-NULL值判断-IS-NULL、IS-NOT-NULL" class="headerlink" title="5.4.5 NULL值判断(IS NULL、IS NOT NULL)"></a>5.4.5 NULL值判断(IS NULL、IS NOT NULL)</h3><blockquote>
<ul>
<li><p>IS NULL</p>
<p>列名  IS NULL</p>
</li>
<li><p>IS NOT NULL </p>
<p>列名 IS NOT NULL</p>
</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询没有提成的员工信息(编号、名字、薪资、提成)</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary</span><br><span class="line"><span class="keyword">from</span> t_employees </span><br><span class="line"><span class="keyword">where</span> commission_pct <span class="keyword">IS</span> <span class="literal">NULL</span>;</span><br></pre></td></tr></table></figure>



<h3 id="5-4-6-枚举查询-IN-值1，值2，值3"><a href="#5-4-6-枚举查询-IN-值1，值2，值3" class="headerlink" title="5.4.6 枚举查询( IN (值1，值2，值3))"></a>5.4.6 枚举查询( IN (值1，值2，值3))</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询部门编号为70、80、90 的员工信息(编号、名字、薪资、部门编号)</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary，department_id</span><br><span class="line"><span class="keyword">from</span> t_employees </span><br><span class="line"><span class="keyword">where</span> department_id <span class="keyword">in</span> (<span class="number">70</span>,<span class="number">80</span>,<span class="number">90</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：IN 的查询效率较低，可通过多条件拼接。</li>
</ul>
<h3 id="5-4-7-模糊查询"><a href="#5-4-7-模糊查询" class="headerlink" title="5.4.7 模糊查询"></a>5.4.7 模糊查询</h3><blockquote>
<ul>
<li><p>LIKE _      (单个任意字符)</p>
<p>列名  LIKE  ‘张_’</p>
</li>
<li><p>LIKE %     (任意长度的任意字符)</p>
<p>列名 LIKE  ‘张%’</p>
</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># 查询名字以&#x27;L&#x27;开头的员工信息(编号，名字，薪资,部门编号)</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id , first_name , salary , department_id</span><br><span class="line"><span class="keyword">FROM</span> t_employees</span><br><span class="line"><span class="keyword">WHERE</span> first_name <span class="keyword">LIKE</span> ‘L%’;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查询名字以&quot;L&quot;开头并且长度为4的员工信息(编号，名字，薪资，部门编号)SELECT employee_id , first_name , salary , department_id </span></span><br><span class="line">FROM t_employees</span><br><span class="line">WHERE first_name LIKE‘L___&#x27;;</span><br></pre></td></tr></table></figure>



<h3 id="5-4-8-分支结构查询"><a href="#5-4-8-分支结构查询" class="headerlink" title="5.4.8 分支结构查询"></a>5.4.8 分支结构查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CASE</span><br><span class="line">	WHEN 条件1 THEN 结果1</span><br><span class="line">	WHEN 条件2 THEN 结果2</span><br><span class="line">	WHEN 条件3 THEN 结果3</span><br><span class="line">	ELSE 结果</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>

<ul>
<li>注意 ： 通过使用 case end 进行条件判断，每条数据对应生成一个值。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询员工信息(编号，名字，薪资，薪资级别&lt;对应条件表达式生成&gt;)</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id , first_name , salary , department_id ,</span><br><span class="line">	<span class="keyword">CASE</span></span><br><span class="line">		<span class="keyword">WHEN</span> salary&gt;=<span class="number">10000</span> <span class="keyword">THEN</span> <span class="string">&#x27;A&#x27;</span></span><br><span class="line">		<span class="keyword">WHEN</span> salary&gt;=<span class="number">8000</span> <span class="keyword">AND</span> salary&lt;<span class="number">10000</span> <span class="keyword">THEN</span> <span class="string">&#x27;B&#x27;</span></span><br><span class="line">		<span class="keyword">WHEN</span> salary&gt;=<span class="number">6000</span> <span class="keyword">AND</span> salary&lt;<span class="number">8000</span> <span class="keyword">THEN</span> <span class="string">&#x27;C&#x27;</span></span><br><span class="line">		<span class="keyword">WHEN</span> salary&gt;=<span class="number">4000</span> <span class="keyword">AND</span> salary&lt;<span class="number">6000</span> <span class="keyword">THEN</span> <span class="string">&#x27;D&#x27;</span></span><br><span class="line">	<span class="keyword">ELSE</span> <span class="string">&#x27;E&#x27;</span></span><br><span class="line">    	<span class="keyword">END</span> <span class="keyword">as</span> <span class="string">&quot;LEVEL&quot;</span></span><br><span class="line"><span class="keyword">FROM</span> t_employees;</span><br></pre></td></tr></table></figure>



<h2 id="5-5-时间查询"><a href="#5-5-时间查询" class="headerlink" title="5.5 时间查询"></a>5.5 时间查询</h2><blockquote>
<p>语法：select 时间函数([参数列表])</p>
</blockquote>
<ul>
<li>经验：执行时间函数查询，会自动生成一张虚表(一行一列)</li>
</ul>
<table>
<thead>
<tr>
<th>时间函数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>SYSDATE()</td>
<td>当前系统时间(日、月、年、时、分、秒)</td>
</tr>
<tr>
<td>CURDATE()</td>
<td>获取当前日期</td>
</tr>
<tr>
<td>CURTIME()</td>
<td>获取当前时间</td>
</tr>
<tr>
<td>WEEK(DATE)</td>
<td>获取指定日期为一年中的第几周</td>
</tr>
<tr>
<td>YEAR(DATE)</td>
<td>获取指定日期的年份</td>
</tr>
<tr>
<td>HOUR(TIME)</td>
<td>获取指定时间的小时值</td>
</tr>
<tr>
<td>MINUTE(TIME)</td>
<td>获取时间的分钟值</td>
</tr>
<tr>
<td>DATEDIFF(DATE1,DATE2)</td>
<td>获取DATE1和DATE2之间相隔的天数</td>
</tr>
<tr>
<td>ADDDATE(DATE,N)</td>
<td>计算DATE加上N天后的日期</td>
</tr>
</tbody></table>
<h3 id="5-5-1-获得当前系统时间"><a href="#5-5-1-获得当前系统时间" class="headerlink" title="5.5.1 获得当前系统时间"></a>5.5.1 获得当前系统时间</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询当前时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span>()</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询当前时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOW</span>()</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取当前日期</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CURDATE</span>()</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获得当前时间</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CURTIME</span>()</span><br></pre></td></tr></table></figure>



<h2 id="5-6-字符串查询"><a href="#5-6-字符串查询" class="headerlink" title="5.6 字符串查询"></a>5.6 字符串查询</h2><blockquote>
<p>语法：SELECT 字符串函数([参数列表])</p>
</blockquote>
<table>
<thead>
<tr>
<th>字符串函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>CONCAT(str1,str2,str….)</td>
<td>将多个字符串连接</td>
</tr>
<tr>
<td>INSERT(str,pos,len,newStr)</td>
<td>将str中指定pos位置开始len长度的内容替换为newStr</td>
</tr>
<tr>
<td>LOWER(str)</td>
<td>将指定字符串转换为小写</td>
</tr>
<tr>
<td>UPPER(str)</td>
<td>将指定字符串转换为大写</td>
</tr>
<tr>
<td>SUBSTRING(str,num,len)</td>
<td>将str字符串指定num位置开始截取len个内容</td>
</tr>
</tbody></table>
<h3 id="5-6-1-字符串应用"><a href="#5-6-1-字符串应用" class="headerlink" title="5.6.1 字符串应用"></a>5.6.1 字符串应用</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拼接内容</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="string">&#x27;My&#x27;</span>,<span class="string">&#x27;S&#x27;</span>,<span class="string">&#x27;QL&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串替换</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">INSERT</span>(<span class="string">&#x27;这是一个数据库&#x27;</span>，<span class="number">3</span>，<span class="number">2</span>，<span class="string">&#x27;MySQL&#x27;</span>)<span class="comment"># 这是MySQL数据库</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定内容转换为小写</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">LOWER</span>(<span class="string">&#x27;MYSQL&#x27;</span>); <span class="comment"># mysql</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定内容转换为大写</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">UPPER</span>(<span class="string">&#x27;mysql&#x27;</span>); <span class="comment"># MYSQL</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 截取指定内容</span></span><br><span class="line"><span class="keyword">SELECT</span> SUBSTRRING(<span class="string">&#x27;JavaMySQLOracle&#x27;</span>,<span class="number">5</span>,<span class="number">5</span>); <span class="comment"># MySQL</span></span><br></pre></td></tr></table></figure>



<h2 id="5-7-聚合函数"><a href="#5-7-聚合函数" class="headerlink" title="5.7 聚合函数"></a>5.7 聚合函数</h2><blockquote>
<p>语法：SELECT 聚合函数(列名) FROM 表名；</p>
</blockquote>
<ul>
<li><strong>经验：==对多条数据的单列进行统计，返回统计后的一行结果。==</strong></li>
</ul>
<table>
<thead>
<tr>
<th>聚合函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>SUM()</td>
<td>求所有行中单列结果的总和</td>
</tr>
<tr>
<td>AVG()</td>
<td>平均值</td>
</tr>
<tr>
<td>MAX()</td>
<td>最大值</td>
</tr>
<tr>
<td>MIN()</td>
<td>最小值</td>
</tr>
<tr>
<td>COUNT()</td>
<td>求总行数</td>
</tr>
</tbody></table>
<h3 id="5-7-1-单列总和"><a href="#5-7-1-单列总和" class="headerlink" title="5.7.1 单列总和"></a>5.7.1 单列总和</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计所有员工每月的工资总和</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sum</span>(salary)</span><br><span class="line"><span class="keyword">from</span> t_employees;</span><br></pre></td></tr></table></figure>



<h3 id="5-7-2-单列平均值"><a href="#5-7-2-单列平均值" class="headerlink" title="5.7.2 单列平均值"></a>5.7.2 单列平均值</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计所有员工每月的平均工资</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">avg</span>(salary)</span><br><span class="line"><span class="keyword">from</span> t_employees;</span><br></pre></td></tr></table></figure>



<h3 id="5-7-3-单列最大值"><a href="#5-7-3-单列最大值" class="headerlink" title="5.7.3 单列最大值"></a>5.7.3 单列最大值</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计所有员工中月薪最高的工资</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">max</span>(salary)</span><br><span class="line"><span class="keyword">from</span> t_employees;</span><br></pre></td></tr></table></figure>



<h3 id="5-7-4-单列最小值"><a href="#5-7-4-单列最小值" class="headerlink" title="5.7.4 单列最小值"></a>5.7.4 单列最小值</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计所有员工中月薪最低的工资</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">min</span>(salary)</span><br><span class="line"><span class="keyword">from</span> t_employees;</span><br></pre></td></tr></table></figure>



<h3 id="5-7-5-总行数"><a href="#5-7-5-总行数" class="headerlink" title="5.7.5 总行数"></a>5.7.5 总行数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计员工总数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*)</span><br><span class="line"><span class="keyword">from</span> t_employees;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计有提出的员工人数</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(commission_pct)</span><br><span class="line"><span class="keyword">from</span> t_emplotees;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==聚合函数自动忽略 null 值，不进行统计。==</strong></li>
</ul>
<h2 id="5-8-分组查询"><a href="#5-8-分组查询" class="headerlink" title="5.8 分组查询"></a>5.8 分组查询</h2><blockquote>
<p>语法：select 列名 from 表名 where 条件 GROUP BY 分组依据(列)；</p>
</blockquote>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>GROUP BY</td>
<td>分组依据，必须在 WHERE 之后生效</td>
</tr>
</tbody></table>
<h3 id="5-8-1-查询各部门的总人数"><a href="#5-8-1-查询各部门的总人数" class="headerlink" title="5.8.1 查询各部门的总人数"></a>5.8.1 查询各部门的总人数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 思路：</span></span><br><span class="line"><span class="comment"># 1、按照部门编号进行分组(分组依据 department_id).</span></span><br><span class="line"><span class="comment"># 2、再针对各部门的人数进行统计(count)</span></span><br><span class="line"><span class="keyword">select</span> department_id,<span class="keyword">count</span>(salary)</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id;</span><br></pre></td></tr></table></figure>



<h3 id="5-8-2-查询各部门的平均工资"><a href="#5-8-2-查询各部门的平均工资" class="headerlink" title="5.8.2 查询各部门的平均工资"></a>5.8.2 查询各部门的平均工资</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 思路：</span></span><br><span class="line"><span class="comment"># 1、按照部门编号进行分组(分组依据 department_id)</span></span><br><span class="line"><span class="comment"># 2、针对每个部门进行平均工资统计(avg)</span></span><br><span class="line"><span class="keyword">select</span> department_id,<span class="keyword">avg</span>(salary)</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id;</span><br></pre></td></tr></table></figure>



<h3 id="5-8-3-查询各个部门、各个岗位的人数"><a href="#5-8-3-查询各个部门、各个岗位的人数" class="headerlink" title="5.8.3 查询各个部门、各个岗位的人数"></a>5.8.3 查询各个部门、各个岗位的人数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 思路：</span></span><br><span class="line"><span class="comment">#1.按照部门编号进行分组(分组依据department_id)。</span></span><br><span class="line"><span class="comment">#2.按照岗位名称进行分组(分组依据job_id)。</span></span><br><span class="line"><span class="comment">#3.针对每个部门中的各个岗位进行人数统计(count)。</span></span><br><span class="line"><span class="keyword">SELECT</span> department_id , job_id ,<span class="keyword">COUNT</span>(employee_id)</span><br><span class="line"><span class="keyword">FROM</span> t_employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id , job_id;</span><br></pre></td></tr></table></figure>



<h3 id="5-8-4-常见问题"><a href="#5-8-4-常见问题" class="headerlink" title="5.8.4 常见问题"></a>5.8.4 常见问题</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询各个部门id、总人数、first_name</span></span><br><span class="line"><span class="keyword">select</span> department_id,<span class="keyword">count</span>(*),first_name</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id; <span class="comment"># 这么写是错误的，详见下面注意事项；</span></span><br></pre></td></tr></table></figure>

<ul>
<li>注意：分组查询中，select显示的列只能是分组依据列，或者聚合函数列，不能出现其他列。</li>
</ul>
<h2 id="5-9-分组过滤查询"><a href="#5-9-分组过滤查询" class="headerlink" title="5.9 分组过滤查询"></a>5.9 分组过滤查询</h2><blockquote>
<p>语法：select 列名 from 表名 where 条件 group up 分组列 having 过滤规则；</p>
</blockquote>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>HAVING</td>
<td>过滤规则定义对分组后的数据进行过滤</td>
</tr>
</tbody></table>
<h3 id="5-9-1-统计部门的最高工资"><a href="#5-9-1-统计部门的最高工资" class="headerlink" title="5.9.1 统计部门的最高工资"></a>5.9.1 统计部门的最高工资</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计60、70、90号部门的最高工资</span></span><br><span class="line"><span class="comment"># 思路：</span></span><br><span class="line"><span class="comment">#1)、确定分组依据(department_id)</span></span><br><span class="line"><span class="comment">#2)、对分组后的数据，过滤出部门编号是60、70、90信息</span></span><br><span class="line"><span class="comment">#3)、max()函数处理</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> department_id，<span class="keyword">max</span>(salary)</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id</span><br><span class="line"><span class="keyword">having</span> department_id <span class="keyword">in</span> (<span class="number">60</span>,<span class="number">70</span>,<span class="number">90</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># group by 确定分组依据department_id</span></span><br><span class="line"><span class="comment"># having 过滤出60，70，90</span></span><br><span class="line"><span class="comment"># select 查看部门编号和max函数</span></span><br></pre></td></tr></table></figure>





<h2 id="5-10-限定查询"><a href="#5-10-限定查询" class="headerlink" title="5.10 限定查询"></a>5.10 限定查询</h2><blockquote>
<p>select 列名 from 表名 LIMIT 起始行，查询行数</p>
</blockquote>
<table>
<thead>
<tr>
<th>关键字</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>LIMIT offset_start, row_count</td>
<td>限定查询结果的起始行和总行数</td>
</tr>
</tbody></table>
<h3 id="5-10-1-查询前5行记录"><a href="#5-10-1-查询前5行记录" class="headerlink" title="5.10.1 查询前5行记录"></a>5.10.1 查询前5行记录</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询表中前五名员工的所有信息</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_employees <span class="keyword">limit</span> <span class="number">0</span>,<span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：起始行是从0开始，代表了第一行。第二个参数代表的是从指定行开始查询几行</li>
</ul>
<h3 id="5-10-2-limit典型应用"><a href="#5-10-2-limit典型应用" class="headerlink" title="5.10.2 limit典型应用"></a>5.10.2 limit典型应用</h3><p>分页查询：一页显示 10 条，一共查询三页</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 思路：第一页是从 0 开始，显示 10 条</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_employees <span class="keyword">limit</span> <span class="number">0</span>，<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 思路：第一页是从 10 开始，显示 10 条</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_employees <span class="keyword">limit</span> <span class="number">10</span>，<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 思路：第一页是从 20 开始，显示 10 条</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_employees <span class="keyword">limit</span> <span class="number">20</span>，<span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>经验：==在分页应用场景中，起始行是变化的，但是一页显示的条数是不变的==</strong></li>
</ul>
<h2 id="5-11-查询总结"><a href="#5-11-查询总结" class="headerlink" title="5.11 查询总结"></a>5.11 查询总结</h2><h3 id="5-11-1-SQL-语句编写顺序"><a href="#5-11-1-SQL-语句编写顺序" class="headerlink" title="5.11.1 SQL 语句编写顺序"></a>5.11.1 SQL 语句编写顺序</h3><blockquote>
<p>select 列名 from 表名 where 条件 group up 分组 having 过滤条件 order by 排序列(asc|desc)  limit 起始行，总条数；</p>
</blockquote>
<h3 id="5-11-2-SQL语句执行顺序"><a href="#5-11-2-SQL语句执行顺序" class="headerlink" title="5.11.2 SQL语句执行顺序"></a>5.11.2 SQL语句执行顺序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.FROM : 指定数据来源表</span><br><span class="line">2.WHERE : 对查询数据做第一次过滤</span><br><span class="line">3.GROUP BY : 分组</span><br><span class="line">4.HAVING : 对分组后的数据第二次过滤</span><br><span class="line">5.SELECT ： 查询各字段的值</span><br><span class="line">6.ORDER BY ： 排序</span><br><span class="line">7.LIMIT : 限定查询结果</span><br></pre></td></tr></table></figure>



<h2 id="5-12-子查询-作为条件判断"><a href="#5-12-子查询-作为条件判断" class="headerlink" title="5.12 子查询(作为条件判断)"></a>5.12 子查询(作为条件判断)</h2><blockquote>
<p>select 列名 from 表名 where  条件 (子查询结果)</p>
</blockquote>
<h3 id="5-12-1-查询工资大于Bruce-的员工信息"><a href="#5-12-1-查询工资大于Bruce-的员工信息" class="headerlink" title="5.12.1 查询工资大于Bruce 的员工信息"></a>5.12.1 查询工资大于Bruce 的员工信息</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1、先查询到 Bruce 的工资(一行一列)</span></span><br><span class="line"><span class="keyword">select</span> salary <span class="keyword">from</span> t_employees <span class="keyword">where</span> first_name = <span class="string">&#x27;Bruce&#x27;</span>; <span class="comment"># 工资是 6000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、查询工资大于 Bruce 的员工信息</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_employees <span class="keyword">where</span> salary &gt; <span class="number">6000</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、将 1 、2 两条语句整合</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_employees <span class="keyword">where</span> salary &gt; (<span class="keyword">select</span> salary <span class="keyword">from</span> t_employees <span class="keyword">where</span> first_name = <span class="string">&#x27;Bruce&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==将子查询“一行一列”的结果作为外部查询的条件，做第二次查询；==</strong></li>
<li><strong>==子查询得到一行一列的结果才能作为外部查询的等值判断条件或不等值条件判断；==</strong></li>
</ul>
<h2 id="5-13-子查询-作为枚举查询条件"><a href="#5-13-子查询-作为枚举查询条件" class="headerlink" title="5.13 子查询(作为枚举查询条件)"></a>5.13 子查询(作为枚举查询条件)</h2><blockquote>
<p>select 列名 from 表名 where 列名 in (子查询结果)；</p>
</blockquote>
<h3 id="5-13-1-查询与名为’King’同一部门的员工信息"><a href="#5-13-1-查询与名为’King’同一部门的员工信息" class="headerlink" title="5.13.1 查询与名为’King’同一部门的员工信息"></a>5.13.1 查询与名为’King’同一部门的员工信息</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 思路：</span></span><br><span class="line"><span class="comment"># 1、先查询 &#x27;King&#x27; 所在的部门编号(多行单列)</span></span><br><span class="line"><span class="keyword">select</span> department_id</span><br><span class="line"><span class="keyword">from</span> t_empployees</span><br><span class="line"><span class="keyword">where</span> last_name = <span class="string">&#x27;King&#x27;</span>; // 部门编号：80、90</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、再查询80、90号部门的员工信息</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary,department_id</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">where</span> department_id <span class="keyword">in</span> (<span class="number">80</span>,<span class="number">90</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3、SQL：合并</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary,department_id</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">where</span> department_id <span class="keyword">in</span> (<span class="keyword">select</span> department_id <span class="keyword">from</span> t_empployees <span class="keyword">where</span> last_name = <span class="string">&#x27;King&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>==将子查询’多行一列’的结果作为外部查询的枚举查询条件，做第二次查询；==</strong></li>
</ul>
<h3 id="5-13-2-工资高于60部门所有人的信息"><a href="#5-13-2-工资高于60部门所有人的信息" class="headerlink" title="5.13.2 工资高于60部门所有人的信息"></a>5.13.2 工资高于60部门所有人的信息</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1、查询 60 部门所有人的工资(多行多列)</span></span><br><span class="line"><span class="keyword">select</span> salary <span class="keyword">from</span> t_empployees <span class="keyword">where</span> dapartment_id = <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询高于 60 部门所有人的工资的员工信息(高于所有)</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_employees <span class="keyword">where</span> salary &gt; <span class="keyword">ALL</span>(<span class="keyword">select</span> salary <span class="keyword">from</span> t_empployees <span class="keyword">where</span> dapartment_id = <span class="number">60</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询低于 60 部门所有人的工资的员工信息(高于所有)</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_employees <span class="keyword">where</span> salary &gt; <span class="keyword">ANY</span>(<span class="keyword">select</span> salary <span class="keyword">from</span> t_empployees <span class="keyword">where</span> dapartment_id = <span class="number">60</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==当子查询结果集形式为多行单列时可以使用 ANY 或 ALL 关键字；==</strong></li>
</ul>
<h2 id="5-14-子查询-作为一张表"><a href="#5-14-子查询-作为一张表" class="headerlink" title="5.14 子查询(作为一张表)"></a>5.14 子查询(作为一张表)</h2><blockquote>
<p>select 列名 from (子查询的结果集) where 条件；</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 思路：</span></span><br><span class="line"><span class="comment"># 1、先对所有员工的薪资进行排序(排序后的临时表)</span></span><br><span class="line"><span class="keyword">select</span> employee_id ,first_name,salary</span><br><span class="line"><span class="keyword">from</span> t_employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2、再查询临时表中前5行员工信息</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary</span><br><span class="line"><span class="keyword">from</span> (临时表)</span><br><span class="line"><span class="keyword">limit</span> <span class="number">0</span>，<span class="number">5</span>；</span><br><span class="line"></span><br><span class="line"><span class="comment"># SQL：合并</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,salary</span><br><span class="line"><span class="keyword">from</span> (<span class="keyword">select</span> employee_id ,first_name,salary <span class="keyword">from</span> t_employees <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>) <span class="keyword">as</span> temp</span><br><span class="line"><span class="keyword">limit</span> <span class="number">0</span>，<span class="number">5</span>；</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>==将子查询”多行多列”的结果作为外部查询的一张表，做第二次查询。==</strong></li>
<li><strong>注意：==子查询作为临时表，为其赋予一个临时表名。==</strong></li>
</ul>
<h2 id="5-15-合并查询"><a href="#5-15-合并查询" class="headerlink" title="5.15 合并查询"></a>5.15 合并查询</h2><blockquote>
<ul>
<li>select * from 表名1 UNION select * from 表名2；</li>
<li>select * from 表名1 UNION ALL  select * from 表名2；</li>
</ul>
</blockquote>
<h3 id="5-15-1-合并两张表的结果-去除重复记录"><a href="#5-15-1-合并两张表的结果-去除重复记录" class="headerlink" title="5.15.1 合并两张表的结果(去除重复记录)"></a>5.15.1 合并两张表的结果(去除重复记录)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 合并两张表的结果，去除重复记录</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t1 <span class="keyword">UNION</span> <span class="keyword">select</span> * <span class="keyword">from</span> t2；</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==合并结果的两张表，列数必须相同，列的数据类型可以不同==</strong></li>
</ul>
<h3 id="5-15-2-合并两张表的结果-保留重复记录"><a href="#5-15-2-合并两张表的结果-保留重复记录" class="headerlink" title="5.15.2 合并两张表的结果(保留重复记录)"></a>5.15.2 合并两张表的结果(保留重复记录)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 合并两张表的结果，不去除重复记录(显示所有)</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t1 <span class="keyword">UNION</span> <span class="keyword">ALL</span>  <span class="keyword">select</span> * <span class="keyword">from</span> t2；</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==使用<code>UNION</code>合并结果集，会去除掉两张表中重复的数据；==</strong></li>
</ul>
<h2 id="5-16-表连接查询"><a href="#5-16-表连接查询" class="headerlink" title="5.16 表连接查询"></a>5.16 表连接查询</h2><blockquote>
<p>select 列名 from 表1 连接方式 表2 on 连接条件；</p>
</blockquote>
<h3 id="5-16-1-内连接查询-inner-join-on"><a href="#5-16-1-内连接查询-inner-join-on" class="headerlink" title="5.16.1 内连接查询( inner join on )"></a>5.16.1 内连接查询( inner join on )</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.查询所有有部门的员工信息 (不包括没有部门的员工) SQL 标准</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t_employees <span class="keyword">INNER</span> <span class="keyword">JOIN</span> t.jobs <span class="number">0</span>N t_employees.JOB_ID = t.jobs .JOB_ID</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.查询所有有部门的员工信息 (不包括没有部门的员工) MYSQL</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t_employees,t.jobs <span class="keyword">WHERE</span> t_employees.JOB_ID = t.jobs.JOB_ID</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>经验:==在MySql中，第二种方式也可以作为内连接查询，但是不符合SQL标准;==</strong></li>
<li><strong>==而第一种属于SQL标准，与其他关系型数据库通用;==</strong></li>
</ul>
<h3 id="5-16-2-三表连接查询"><a href="#5-16-2-三表连接查询" class="headerlink" title="5.16.2 三表连接查询"></a>5.16.2 三表连接查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询所有员工工号、名字、部门名称、部门所在国家ID</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t_employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> t_departments d</span><br><span class="line"><span class="keyword">on</span> e.department_id = d.department_id</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> t_locations l</span><br><span class="line"><span class="keyword">ON</span> d. location_id = l.location_id</span><br></pre></td></tr></table></figure>



<h3 id="5-16-3-左外连接-left-join-on"><a href="#5-16-3-左外连接-left-join-on" class="headerlink" title="5.16.3 左外连接( left join on )"></a>5.16.3 左外连接( left join on )</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询所有员工信息，以及所对应的部门名称（没有部门的员工，也在查询结果中，部门名称以NULL填充)</span></span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id , e.first_name , e.salary , d.department_name <span class="keyword">FROM</span> t_employees e</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> t_departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id = d.department_id;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>注意:==左外连接，是以左表为主表，依次向右匹配，匹配到，返回结果==</strong></p>
</li>
<li><p><strong>==匹配不到，则返回 NULL 值填充==</strong></p>
</li>
</ul>
<h3 id="5-16-4-右外连接-right-join-on"><a href="#5-16-4-右外连接-right-join-on" class="headerlink" title="5.16.4 右外连接 (right join on )"></a>5.16.4 右外连接 (right join on )</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查询所有部门信息，以及此部门中的所有员工信息（没有员工的部门，也在查询结果中，员工信息以NULL|填充)</span></span><br><span class="line"><span class="keyword">SELECT</span> e.employee_id , e.first_name , e.salary , d.department_name <span class="keyword">FROM</span> t_employees e</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> t_departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id = d.department_id;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>注意:==右外连接，是以右表为主表，依次向左匹配，匹配到，返回结果==</strong></p>
</li>
<li><p><strong>==匹配不到，则返回 NULL 值填充==</strong></p>
</li>
</ul>
<h1 id="六、DML操作"><a href="#六、DML操作" class="headerlink" title="六、DML操作"></a>六、DML操作</h1><h2 id="6-1-新增-insert"><a href="#6-1-新增-insert" class="headerlink" title="6.1 新增(insert)"></a>6.1 新增(insert)</h2><blockquote>
<p>insert into 表名(列1，列2，列3) values (值1，值2，值3….)</p>
</blockquote>
<h3 id="6-1-1-添加一条信息"><a href="#6-1-1-添加一条信息" class="headerlink" title="6.1.1 添加一条信息"></a>6.1.1 添加一条信息</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加一条工作岗位信息</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_jobs(JOB_ID,JOB_TITLE,MIN_SALARY,MAX_SALARY) <span class="keyword">values</span> (<span class="string">&#x27;JAVA_LE&#x27;</span>,<span class="string">&#x27;JAVA_Lecturue&#x27;</span>,<span class="number">2500</span>,<span class="number">9000</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==表名后的列名和 values 里的值要一一对应(个数、顺序、类型)；==</strong></li>
</ul>
<h2 id="6-2-修改-update"><a href="#6-2-修改-update" class="headerlink" title="6.2 修改(update)"></a>6.2 修改(update)</h2><blockquote>
<p> update 表名 set 列1 = 新值1，列2 = 新值2，….. where 条件；</p>
</blockquote>
<h3 id="6-2-1-修改一条信息"><a href="#6-2-1-修改一条信息" class="headerlink" title="6.2.1 修改一条信息"></a>6.2.1 修改一条信息</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改编号为100 的员工工资为25000</span></span><br><span class="line"><span class="keyword">update</span> t_employees <span class="keyword">set</span> salary = <span class="number">25000</span> <span class="keyword">where</span> EMPLOYEE_ID = <span class="string">&#x27;100&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==set 后多个列名 = 值，绝大多数情况都要加 where 条件，指定修改，否则为整表更新；==</strong></li>
</ul>
<h2 id="6-3-删除-delete"><a href="#6-3-删除-delete" class="headerlink" title="6.3 删除(delete)"></a>6.3 删除(delete)</h2><blockquote>
<p>delete from 表名 where 条件；</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除编号为 135 的员工</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> t_employees <span class="keyword">where</span> EMPLOYEE_ID= <span class="string">&#x27;135&#x27;</span>;</span><br><span class="line"><span class="comment"># 删除名字为pater，年龄为 35的员工</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> t_employees <span class="keyword">where</span> <span class="keyword">name</span> = <span class="string">&#x27;pater&#x27;</span> <span class="keyword">and</span> age = <span class="string">&#x27;35&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==删除时，如若不加<code>where</code> 条件，删除的是整张表的数据。==</strong></li>
</ul>
<h2 id="6-4-清空整表数据-truncate"><a href="#6-4-清空整表数据-truncate" class="headerlink" title="6.4 清空整表数据( truncate )"></a>6.4 清空整表数据( truncate )</h2><blockquote>
<p>truncate table 表名；</p>
</blockquote>
<h3 id="6-4-1-清空整张表"><a href="#6-4-1-清空整张表" class="headerlink" title="6.4.1 清空整张表"></a>6.4.1 清空整张表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 清空 t_countries 整张表</span></span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> t_countries;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==与delete 不加where删除整表数据不同，truncate 是把表销毁，再按照原表的格式创建一张新表；==</strong></li>
</ul>
<h1 id="七、数据表操作"><a href="#七、数据表操作" class="headerlink" title="七、数据表操作"></a>七、数据表操作</h1><h2 id="7-1-数据类型"><a href="#7-1-数据类型" class="headerlink" title="7.1 数据类型"></a>7.1 数据类型</h2><blockquote>
<p>MySQL 支持多种类型，大致可以分为三类：数值、日期/时间和字符串(字符)类型。</p>
</blockquote>
<h3 id="7-1-1-数值类型"><a href="#7-1-1-数值类型" class="headerlink" title="7.1.1 数值类型"></a>7.1.1 数值类型</h3><table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>范围(有符号)</th>
<th>范围(无符号)</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>int</td>
<td>4字节</td>
<td>(-2147483648,2147483647)</td>
<td>(0,4294967295)</td>
<td>大整数值</td>
</tr>
<tr>
<td>DOUBLE</td>
<td>8字节</td>
<td>(-1.797E+308,-2.22E-308)</td>
<td>(0,2.22E-308,1.797E+308)</td>
<td>双精度浮点数值</td>
</tr>
<tr>
<td>DOUBLE(M,D)</td>
<td>8个字节，M表示长度，D表示小数位数</td>
<td>(同上，受M和D的约束 DOUBLE(5,2) -999.99 - +999.99)</td>
<td>同上，受M和D的约束</td>
<td>双精度浮点数</td>
</tr>
<tr>
<td>DECIMAL(M,D)</td>
<td>DECIMAL(M,D)</td>
<td>依赖于M和D的值，M最大值为65</td>
<td>依赖于M和D的值，M最大值为65</td>
<td>小数值</td>
</tr>
</tbody></table>
<h3 id="7-1-2-日期类型"><a href="#7-1-2-日期类型" class="headerlink" title="7.1.2 日期类型"></a>7.1.2 日期类型</h3><table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>范围</th>
<th>格式</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>DATE</td>
<td>3</td>
<td>1000-0-01/9999-12-31</td>
<td>YYYY-MM-DD</td>
<td>日期值</td>
</tr>
<tr>
<td>TIME</td>
<td>3</td>
<td>‘-838:59:59’/‘838:59:59’</td>
<td>HH:MM:SS</td>
<td>时间值或持续时间</td>
</tr>
<tr>
<td>YEAR</td>
<td>1</td>
<td>1901/2155</td>
<td>YYYY</td>
<td>年份值</td>
</tr>
<tr>
<td>DATETIME</td>
<td>8</td>
<td>1000-01-01 00:00:00/9999-12-31 23:59:59</td>
<td>YYYY-MM-DD HH:MM:SS</td>
<td>混合日期和时间值</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>4</td>
<td>1970-01-01 00:00:00/2038 结束时间是第2147483647秒北京时间 2038-1-19  11：14：07，格林尼治时间 2038年1月19日 凌晨 03：14：07</td>
<td>YYYY-MM-DD  HH:MM:SS</td>
<td>混合日期时间值，时间戳</td>
</tr>
</tbody></table>
<h3 id="7-1-3-字符串类型"><a href="#7-1-3-字符串类型" class="headerlink" title="7.1.3 字符串类型"></a>7.1.3 字符串类型</h3><table>
<thead>
<tr>
<th>类型</th>
<th>大小</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>CHAR</td>
<td>0-255字符</td>
<td>定长字符串char(10) 10个字符</td>
</tr>
<tr>
<td>VARCHAR</td>
<td>0-65535字节</td>
<td>变长字符串 varchar(10) 10个字符</td>
</tr>
<tr>
<td>BLOB( binary large object )</td>
<td>0-65535字节</td>
<td>二进制形式的长文本数据</td>
</tr>
<tr>
<td>TEXT</td>
<td>0-65535字节</td>
<td>长文本数据</td>
</tr>
</tbody></table>
<ul>
<li><strong>==CHAR 和 VARCHAR 类型类似，但它们保存和检索的方式不同。它们的最大长度和是否尾部空格被保留等方面也不同。在存储或检索过程中不进行大小写转换。==</strong></li>
<li><strong>==BLOB是一个二进制大对象，可以容纳可变数量的数据。有4种BLOB类型：TINYBLOB、BLOB、MEDIUMBLOB和LONGBLOB。它们只是可容纳值得最大长度不同。==</strong></li>
</ul>
<h2 id="7-2-数据表的创建-creata"><a href="#7-2-数据表的创建-creata" class="headerlink" title="7.2 数据表的创建( creata )"></a>7.2 数据表的创建( creata )</h2><blockquote>
<p>create table 表名 (</p>
<p>列名   数据类型 [约束]，</p>
<p>列名   数据类型 [约束]，</p>
<p>…….</p>
<p>列名   数据类型 [约束]     # 最后一列的末尾不加逗号</p>
<p>)[charset=utf8]                # 可根据需要指定表的字符编码集</p>
</blockquote>
<table>
<thead>
<tr>
<th>列名</th>
<th>数据类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>subjectId</td>
<td>INT</td>
<td>课程编号</td>
</tr>
<tr>
<td>subjectName</td>
<td>VARCHAR(20)</td>
<td>课程名称</td>
</tr>
<tr>
<td>subjectHours</td>
<td>INT</td>
<td>课程时长</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 依据上表创建数据表，并向其中插入 3 条测试语句</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> subject(</span><br><span class="line">subjectID <span class="built_in">INT</span>,</span><br><span class="line">subjectName <span class="built_in">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">subjectHours <span class="built_in">INT</span></span><br><span class="line">)<span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> subject(subjectID,subjectName,subjectHours) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">&#x27;Java&#x27;</span>,<span class="number">40</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> subject(subjectID,subjectName,subjectHours) <span class="keyword">values</span> (<span class="number">2</span>,<span class="string">&#x27;MySQL&#x27;</span>,<span class="number">20</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> subject(subjectID,subjectName,subjectHours) <span class="keyword">values</span> (<span class="number">3</span>,<span class="string">&#x27;JavaScript&#x27;</span>,<span class="number">10</span>);</span><br></pre></td></tr></table></figure>



<h2 id="7-3-数据表的修改-alter"><a href="#7-3-数据表的修改-alter" class="headerlink" title="7.3 数据表的修改(alter)"></a>7.3 数据表的修改(alter)</h2><blockquote>
<p>alter table 表名 操作；</p>
</blockquote>
<h3 id="7-3-1-向现有中添加列"><a href="#7-3-1-向现有中添加列" class="headerlink" title="7.3.1 向现有中添加列"></a>7.3.1 向现有中添加列</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在课程表基础上添加 gradeId 列</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> subject <span class="keyword">add</span> gradeId <span class="built_in">int</span>;</span><br></pre></td></tr></table></figure>



<h3 id="7-3-2-修改表中的列"><a href="#7-3-2-修改表中的列" class="headerlink" title="7.3.2 修改表中的列"></a>7.3.2 修改表中的列</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改课程表中课程名称长度为10个字符</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> subject <span class="keyword">modify</span> subjectName <span class="built_in">varchar</span>(<span class="number">10</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==修改表中的某列时，也要写全列的名字，数据类型，约束==</strong></li>
</ul>
<h3 id="7-3-3-删除表中的列"><a href="#7-3-3-删除表中的列" class="headerlink" title="7.3.3 删除表中的列"></a>7.3.3 删除表中的列</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除课程表中 gradeI的列</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> subject <span class="keyword">drop</span> gradeId;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==删除列时，每次只能删除一列==</strong></li>
</ul>
<h3 id="7-3-4-修改列名"><a href="#7-3-4-修改列名" class="headerlink" title="7.3.4 修改列名"></a>7.3.4 修改列名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改课程表中 subjectHours 列为 classHours</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> subject <span class="keyword">change</span> subjectHours classHours <span class="built_in">int</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==修改列名时，在给定列新名称时，要指定列的类型和约束==</strong></li>
</ul>
<h3 id="7-3-5-修改表名"><a href="#7-3-5-修改表名" class="headerlink" title="7.3.5 修改表名"></a>7.3.5 修改表名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改课程表的subject 为sub</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> subject <span class="keyword">rename</span> sub;</span><br></pre></td></tr></table></figure>



<h2 id="7-4-数据表的删除-drop"><a href="#7-4-数据表的删除-drop" class="headerlink" title="7.4 数据表的删除( drop )"></a>7.4 数据表的删除( drop )</h2><blockquote>
<p>drop table 表名</p>
</blockquote>
<h3 id="7-4-1-删除学生表"><a href="#7-4-1-删除学生表" class="headerlink" title="7.4.1 删除学生表"></a>7.4.1 删除学生表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除学生表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> subject；</span><br></pre></td></tr></table></figure>





<h1 id="八、约束"><a href="#八、约束" class="headerlink" title="八、约束"></a>八、约束</h1><h2 id="8-1-实体完整性约束"><a href="#8-1-实体完整性约束" class="headerlink" title="8.1 实体完整性约束"></a>8.1 实体完整性约束</h2><blockquote>
<p>表中的一行数据代表一个实体（entity），实体完整性的作用即是每一行数据不重复、实体唯一。</p>
</blockquote>
<h3 id="8-1-1-主键约束"><a href="#8-1-1-主键约束" class="headerlink" title="8.1.1 主键约束"></a>8.1.1 主键约束</h3><blockquote>
<p>PRIMARY KEY 唯一，标识表中的一行数据，此列的值不可重复，且不能为 NULL</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为表中的主键添加主键约束</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> subject(</span><br><span class="line">	subjectId <span class="built_in">int</span> PRIMARY <span class="keyword">KEY</span>, <span class="comment"># 课程标识唯一，且不能为null</span></span><br><span class="line">    subjectName <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span>,</span><br><span class="line">    subjectHours <span class="built_in">INT</span></span><br><span class="line">)<span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> subject(subjectID,subjectName,subjectHours) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">&#x27;Java&#x27;</span>,<span class="number">40</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> subject(subjectID,subjectName,subjectHours) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">&#x27;Java&#x27;</span>,<span class="number">40</span>); <span class="comment"># error ，会报错，因为课程标识已存在！</span></span><br></pre></td></tr></table></figure>



<h3 id="8-1-2-唯一约束"><a href="#8-1-2-唯一约束" class="headerlink" title="8.1.2 唯一约束"></a>8.1.2 唯一约束</h3><blockquote>
<p>UNIQUE 唯一，标识表中的一行数据，此列的值不可重复，可以为 null</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为表中列值不允许重复的列添加唯一约束</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> subject(</span><br><span class="line">	subjectId <span class="built_in">int</span> PRIMARY <span class="keyword">KEY</span>, </span><br><span class="line">    subjectName <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span>,   <span class="comment"># 课程名称唯一，可以为null</span></span><br><span class="line">    subjectHours <span class="built_in">INT</span></span><br><span class="line">)<span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> subject(subjectID,subjectName,subjectHours) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">&#x27;Java&#x27;</span>,<span class="number">40</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> subject(subjectID,subjectName,subjectHours) <span class="keyword">values</span> (<span class="number">1</span>,<span class="string">&#x27;Java&#x27;</span>,<span class="number">40</span>); <span class="comment"># error ，会报错，因为课程名称已存在！</span></span><br></pre></td></tr></table></figure>



<h3 id="8-1-3-自动增长列"><a href="#8-1-3-自动增长列" class="headerlink" title="8.1.3 自动增长列"></a>8.1.3 自动增长列</h3><blockquote>
<p>AUTO_INCREMENT  自动增长，给主键的数值添加自动增长，从1开始，每次加1，不能单独使用，配合主键使用</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 为表中的主键列添加自动增长，避免忘记主键ID序号</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> subject(</span><br><span class="line">	subjectId <span class="built_in">int</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT, </span><br><span class="line">    subjectName <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span>, </span><br><span class="line">    subjectHours <span class="built_in">INT</span></span><br><span class="line">)<span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> subject(subjectName,subjectHours) <span class="keyword">values</span> (<span class="string">&#x27;Java&#x27;</span>,<span class="number">40</span>); <span class="comment"># 课程编号从1开始，自动增长</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> subject(subjectName,subjectHours) <span class="keyword">values</span> (<span class="string">&#x27;Java&#x27;</span>,<span class="number">40</span>); </span><br></pre></td></tr></table></figure>



<h2 id="8-2-域完整性约束"><a href="#8-2-域完整性约束" class="headerlink" title="8.2 域完整性约束"></a>8.2 域完整性约束</h2><blockquote>
<p>限制列的单元格的数据的准确性</p>
</blockquote>
<h3 id="8-2-1-非空约束"><a href="#8-2-1-非空约束" class="headerlink" title="8.2.1 非空约束"></a>8.2.1 非空约束</h3><blockquote>
<p>NOT NULL 非空，此列必须有值</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 课程名称虽然添加了唯一约束，但可以为 NULL，我们可以加上非空约束来避免</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> subject(</span><br><span class="line">	subjectId <span class="built_in">int</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT, </span><br><span class="line">    subjectName <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line">    subjectHours <span class="built_in">INT</span></span><br><span class="line">)<span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> subject(subjectName,subjectHours) <span class="keyword">values</span> (<span class="literal">null</span>,<span class="number">40</span>); <span class="comment"># 课程名称约束了非空</span></span><br></pre></td></tr></table></figure>



<h3 id="8-2-2-默认值约束"><a href="#8-2-2-默认值约束" class="headerlink" title="8.2.2 默认值约束"></a>8.2.2 默认值约束</h3><blockquote>
<p>DEFAULT 为此列赋予默认值，当新增数据不指定值时,使用默认值进行填充</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新增课程不指定课程时长是，默认使用20进行填充</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> subject(</span><br><span class="line">	subjectId <span class="built_in">int</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT, </span><br><span class="line">    subjectName <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line">    subjectHours <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">20</span></span><br><span class="line">)<span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> subject(subjectName,subjectHours) <span class="keyword">values</span> (<span class="string">&#x27;PHP&#x27;</span>,<span class="keyword">DEFAULT</span>); <span class="comment"># 课程时长以默认值20进行填充</span></span><br></pre></td></tr></table></figure>



<h3 id="8-2-3-引用完整性约束"><a href="#8-2-3-引用完整性约束" class="headerlink" title="8.2.3 引用完整性约束"></a>8.2.3 引用完整性约束</h3><blockquote>
<ul>
<li>语法：CONSTRAINT 引用名 FOREIGN KEY(列名)   REFERENCES   被引用表名(列名)</li>
<li>详解：FOREIGN KEY 引用外部表的某个列的值，新增数据时，约束此列的值必须是引用表中存在的值。</li>
</ul>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建专业表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Speciality(</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">int</span> primary <span class="keyword">key</span> auto_increment,</span><br><span class="line">    SpecialName <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">unique</span> <span class="keyword">not</span> <span class="literal">null</span></span><br><span class="line">)<span class="keyword">charset</span>=utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建课程表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> subject(</span><br><span class="line">	subjectId <span class="built_in">int</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT, </span><br><span class="line">    subjectName <span class="built_in">varchar</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>, </span><br><span class="line">    subjectHours <span class="built_in">INT</span> <span class="keyword">DEFAULT</span> <span class="number">20</span></span><br><span class="line">    <span class="keyword">CONSTRAINT</span> fk_subject_specialId <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(specialId)  <span class="keyword">REFERENCES</span>  Speciality(<span class="keyword">id</span>)</span><br><span class="line"><span class="comment"># 引用专业表里的 id 作为外键，新增课程信息时，约束课程所属的专业    </span></span><br><span class="line">)<span class="keyword">charset</span>=utf8;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==当两张表存在引用关系，要执行删除操作，一定先删除从表(引用表)，在删除主表(被引用表)。==</strong></li>
</ul>
<h2 id="8-3-约束创建整合"><a href="#8-3-约束创建整合" class="headerlink" title="8.3 约束创建整合"></a>8.3 约束创建整合</h2><blockquote>
<p>创建带有约束的表。</p>
</blockquote>
<h3 id="8-3-1-创建表"><a href="#8-3-1-创建表" class="headerlink" title="8.3.1 创建表"></a>8.3.1 创建表</h3><table>
<thead>
<tr>
<th>列名</th>
<th>数据类型</th>
<th>约束</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Gradeld</td>
<td>INT</td>
<td>主键，自动增长</td>
<td>班级编号</td>
</tr>
<tr>
<td>GradeName</td>
<td>varchar(20)</td>
<td>唯一、非空</td>
<td>班级名称</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> Grade(</span><br><span class="line">	Gradeld <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> AUTO_INCREMENT,</span><br><span class="line">    GradeName <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">UNIQUE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> </span><br><span class="line">)<span class="keyword">charset</span>=utf8;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>列名</th>
<th>数据类型</th>
<th>约束</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>student_id</td>
<td>varchar(50)</td>
<td>主键</td>
<td>学号</td>
</tr>
<tr>
<td>student_name</td>
<td>varchar(50)</td>
<td>非空</td>
<td>姓名</td>
</tr>
<tr>
<td>sex</td>
<td>char(2)</td>
<td>默认填充’男’</td>
<td>性别</td>
</tr>
<tr>
<td>borndate</td>
<td>date</td>
<td>非空</td>
<td>生日</td>
</tr>
<tr>
<td>phone</td>
<td>varchar(11)</td>
<td>无</td>
<td>电话</td>
</tr>
<tr>
<td>gradeld</td>
<td>int</td>
<td>非空，外键约束：引用班级表的gradeid</td>
<td>班级编号</td>
</tr>
</tbody></table>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> student(</span><br><span class="line">	student_id <span class="built_in">varchar</span>(<span class="number">50</span>) primary <span class="keyword">key</span>,</span><br><span class="line">    student_name <span class="built_in">varchar</span>(<span class="number">50</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    sex <span class="built_in">char</span>(<span class="number">2</span>) <span class="keyword">default</span> <span class="string">&#x27;男&#x27;</span>,</span><br><span class="line">    borndate <span class="built_in">date</span> <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    phone <span class="built_in">varchar</span>(<span class="number">11</span>),</span><br><span class="line">    gradeld <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">CONSTRAINT</span> fk_student_Grade <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span>(gradeld) <span class="keyword">REFERENCES</span>  Grade(Gradeld)</span><br><span class="line">    <span class="comment"># 引用Grade表的GradeId作为外键，插入时约束学生班级的班级编号必须存在。</span></span><br><span class="line">)<span class="keyword">charset</span>=utf8;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==创建关系表时，一定要先创建主表，在创建从表。==</strong></li>
<li><strong>==删除关系表，先删除从表，再删除主表。==</strong></li>
</ul>
<h1 id="九、事务"><a href="#九、事务" class="headerlink" title="九、事务"></a>九、事务</h1><h2 id="9-1-模拟转账"><a href="#9-1-模拟转账" class="headerlink" title="9.1 模拟转账"></a>9.1 模拟转账</h2><h3 id="9-1-1-数据库模拟转账"><a href="#9-1-1-数据库模拟转账" class="headerlink" title="9.1.1 数据库模拟转账"></a>9.1.1 数据库模拟转账</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># A 账户转账给 B 账户 1000 元。</span></span><br><span class="line"><span class="comment"># A 账户减 1000 元</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">account</span> <span class="keyword">set</span> money = money<span class="number">-1000</span> <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># B 账户加 1000 元</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">account</span> <span class="keyword">set</span> money = money +<span class="number">1000</span> <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>==上述代码完成了两个账户之间转账的操作。==</li>
</ul>
<h3 id="9-1-2-模拟转账错误"><a href="#9-1-2-模拟转账错误" class="headerlink" title="9.1.2 模拟转账错误"></a>9.1.2 模拟转账错误</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#A 账户转账给 B 账户 1000 元。</span></span><br><span class="line"><span class="comment">#A 账户减 1000元。</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">account</span> <span class="keyword">set</span> monry = money<span class="number">-1000</span> <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 断电、异常、出错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#B 账户加 1000元</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">account</span> <span class="keyword">set</span> money = money+<span class="number">1000</span> <span class="keyword">where</span> <span class="keyword">id</span> = <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>==上述代码在减操作后过程中出现了异常或加钱语句出错，会发现，减钱仍旧是成功的，而加钱失败了！==</strong></li>
<li><strong>注意：==每条SQL语句都是一个独立的操作，一个操作执行完对数据库是永久性的影响。==</strong></li>
</ul>
<h2 id="9-2-事务的概念"><a href="#9-2-事务的概念" class="headerlink" title="9.2 事务的概念"></a>9.2 事务的概念</h2><blockquote>
<p>事务是一个原子操作，是一个最小执行单元。可以由一个或多个SQL语句组成，在同一个事务中，所有的SQL语句都成功执行时，整个事务成功，有一个SQL语句执行失败，整个事务都执行失败。</p>
</blockquote>
<h2 id="9-3-事务的边界"><a href="#9-3-事务的边界" class="headerlink" title="9.3 事务的边界"></a>9.3 事务的边界</h2><blockquote>
<ul>
<li><p>开始：连接到数据库，执行一条DML语句。上一个事务结束后，又输入了一条DML语句，即事务的开始。</p>
</li>
<li><p>结束：</p>
<p>1). 提交</p>
<p>a. 显示提交 ： commit；</p>
<p>b).隐式提交：一条创建、删除的语句，正常退出(客户端退出连接)；</p>
<p>2).回滚：</p>
<p>a. 显示回滚：rollback；</p>
<p>b.隐式回滚：非正常退出(断电、宕机)，执行了创建、删除的语句，但是失败了，会为这个无效的语句执行回滚。 </p>
</li>
</ul>
</blockquote>
<h2 id="9-4-事务的原理"><a href="#9-4-事务的原理" class="headerlink" title="9.4 事务的原理"></a>9.4 事务的原理</h2><blockquote>
<p>数据库会为每一个客户端都维护一个空间独立的缓存区(回滚段)，一个事务中所有的增删改语句的执行结果都会缓存在回滚段中，只有当事务中所有的SQL语句均正常结束(commit)，才会将回滚段中的数据同步到数据库。否则无论因为哪种原因失败，整个事务将回滚(rollback).</p>
</blockquote>
<h2 id="9-5-事务的特性"><a href="#9-5-事务的特性" class="headerlink" title="9.5 事务的特性"></a>9.5 事务的特性</h2><blockquote>
<ul>
<li><p>Atomicity(原子性)</p>
<pre><code>表示一个事务内的所有操作是一个整体，要么全部成功，要么全部失败</code></pre>
</li>
<li><p>Consistency(一致性)</p>
<pre><code>表示一个事务内有一个操作失败时，所有的更改过的数据都必须回滚到修改前的状态</code></pre>
</li>
<li><p>Isolation(隔离性)</p>
<pre><code>事务查看数据操作时数据所处的状态，要么是另一个并发事务修改它之前的状态，要么是另一个事务修改它之后的状态，事务不会查看中间状态的数据。</code></pre>
</li>
<li><p>Durability(持久性)</p>
<pre><code>持久性事务完成之后，它对于系统的影响是永久性的。</code></pre>
</li>
</ul>
</blockquote>
<h2 id="9-6-事务应用"><a href="#9-6-事务应用" class="headerlink" title="9.6 事务应用"></a>9.6 事务应用</h2><blockquote>
<p>应用环境：基于增删改语句的操作结果(均返回操作后受影响的行数)，可通过程序逻辑手动控制事务提交或回滚。</p>
</blockquote>
<h3 id="9-6-1-事务完成转账"><a href="#9-6-1-事务完成转账" class="headerlink" title="9.6.1 事务完成转账"></a>9.6.1 事务完成转账</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#A 账户给 B 账户转账。</span></span><br><span class="line"><span class="comment">#1.开启事务</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>;setAutoCommit=0;</span><br><span class="line"><span class="comment">#2.事务内操作数据语句</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">account</span> <span class="keyword">set</span> money=money<span class="number">-1000</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">update</span> <span class="keyword">account</span> <span class="keyword">set</span> money=money+<span class="number">1000</span> <span class="keyword">where</span> <span class="keyword">id</span>=<span class="number">2</span>;</span><br><span class="line"><span class="comment">#3.事务内语句都成功了，执行commit</span></span><br><span class="line"><span class="keyword">commit</span>；</span><br><span class="line"><span class="comment">#4.事务内如果出现错误，执行rollback</span></span><br><span class="line"><span class="keyword">rollback</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==开启事务后，执行的语句均属于当前事务，成功再执行<code>commit</code>，失败要进行<code>rollback</code>==</strong></li>
</ul>
<h1 id="十、权限管理"><a href="#十、权限管理" class="headerlink" title="十、权限管理"></a>十、权限管理</h1><h2 id="10-1-创建用户"><a href="#10-1-创建用户" class="headerlink" title="10.1 创建用户"></a>10.1 创建用户</h2><blockquote>
<p>CREATE  USER   用户名    IDENTIFIED BY  密码</p>
</blockquote>
<h3 id="10-1-1-创建一个用户"><a href="#10-1-1-创建一个用户" class="headerlink" title="10.1.1 创建一个用户"></a>10.1.1 创建一个用户</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个 zhangsan 用户</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">`zhangsna`</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">&#x27;123&#x27;</span>;</span><br></pre></td></tr></table></figure>



<h2 id="10-2-授权"><a href="#10-2-授权" class="headerlink" title="10.2 授权"></a>10.2 授权</h2><blockquote>
<p>GRANT ALL ON 数据库.表   TO 用户名；</p>
</blockquote>
<h3 id="10-2-1-用户授权"><a href="#10-2-1-用户授权" class="headerlink" title="10.2.1 用户授权"></a>10.2.1 用户授权</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将 companyDB下的所有表的权限都赋给 zhangsan</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> companyDB.* <span class="keyword">to</span> <span class="string">`zhangsan`</span>;</span><br></pre></td></tr></table></figure>



<h2 id="10-3-撤销权限"><a href="#10-3-撤销权限" class="headerlink" title="10.3 撤销权限"></a>10.3 撤销权限</h2><blockquote>
<p>REVOKE ALL ON 数据库.表名 FROM 用户名</p>
</blockquote>
<ul>
<li>**注意：撤销权限后，账户要重新连接客户端才会生效</li>
</ul>
<h3 id="10-3-1-撤销用户权限"><a href="#10-3-1-撤销用户权限" class="headerlink" title="10.3.1 撤销用户权限"></a>10.3.1 撤销用户权限</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将 zhangsan 的companyDB 的权限撤销</span></span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">all</span> <span class="keyword">on</span> companyDB.* <span class="keyword">from</span> <span class="string">`zhangsan`</span>;</span><br></pre></td></tr></table></figure>



<h2 id="10-4-删除用户"><a href="#10-4-删除用户" class="headerlink" title="10.4 删除用户"></a>10.4 删除用户</h2><blockquote>
<p>DROP USER 用户名</p>
</blockquote>
<h3 id="10-4-1-删除用户"><a href="#10-4-1-删除用户" class="headerlink" title="10.4.1 删除用户"></a>10.4.1 删除用户</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除用户</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">`zhangsan`</span>;</span><br></pre></td></tr></table></figure>





<h1 id="十一、视图"><a href="#十一、视图" class="headerlink" title="十一、视图"></a>十一、视图</h1><h2 id="11-1-概念"><a href="#11-1-概念" class="headerlink" title="11.1 概念"></a>11.1 概念</h2><blockquote>
<p>视图，虚拟表，从一个表或多个表中查询出来的表，作用和真实表一样，包含一系列带有行和列的数据。视图中，用户可以使用select语句查询数据，也可以使用insert，update，delete修改记录，视图可以使用户操作方便，并保障数据库系统安全。</p>
</blockquote>
<h2 id="11-2-视图特点"><a href="#11-2-视图特点" class="headerlink" title="11.2 视图特点"></a>11.2 视图特点</h2><blockquote>
<ul>
<li>优点<ul>
<li>简单化，数据所见即所得</li>
<li>安全性，用户只能查询或修改他们所能见到得到的数据</li>
<li>逻辑独立性，可以屏蔽真实表结构变化带来的影响。</li>
</ul>
</li>
<li>缺点<ul>
<li>性能相对较差，简单的查询也会变得稍显复杂。</li>
<li>修改不方便，特别是复杂的聚合视图基本无法修改。</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="11-3-视图的创建"><a href="#11-3-视图的创建" class="headerlink" title="11.3 视图的创建"></a>11.3 视图的创建</h2><blockquote>
<p>语法：CREATE VIEW 视图名 AS 查询数据源表语句；</p>
</blockquote>
<h3 id="11-3-1-创建视图"><a href="#11-3-1-创建视图" class="headerlink" title="11.3.1 创建视图"></a>11.3.1 创建视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建 t_empInfo 的视图，其视图从 t_employees表中查询到员工编号、员工姓名、员工邮箱、工资</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> t_empInFo <span class="keyword">as</span> <span class="keyword">select</span> employee_id,first_name,email,salary <span class="keyword">from</span> t_employees;</span><br></pre></td></tr></table></figure>



<h3 id="11-3-2-使用视图"><a href="#11-3-2-使用视图" class="headerlink" title="11.3.2 使用视图"></a>11.3.2 使用视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询 t_empInFo 视图中编号为 101 的员工信息</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> t_empInFo <span class="keyword">where</span> employee_id = <span class="string">&#x27;101&#x27;</span>;</span><br></pre></td></tr></table></figure>



<h2 id="11-4-视图的修改"><a href="#11-4-视图的修改" class="headerlink" title="11.4 视图的修改"></a>11.4 视图的修改</h2><blockquote>
<ul>
<li>方式一：CREATE OR REPLACE VIEW 视图名 AS 查询语句</li>
<li>方式二：ALTER VIEW 视图名 AS 查询语句</li>
</ul>
</blockquote>
<h3 id="11-4-1-修改视图"><a href="#11-4-1-修改视图" class="headerlink" title="11.4.1 修改视图"></a>11.4.1 修改视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方式 1：如果视图存在则进行修改，反之，进行创建</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">view</span> t_empInFo</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,email,salary <span class="keyword">from</span> t_employees;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方式 2：直接对已存在的视图进行修改</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">view</span> t_empInFo</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> employee_id,first_name,email,salary <span class="keyword">from</span> t_employees;</span><br></pre></td></tr></table></figure>



<h2 id="11-5-视图的删除"><a href="#11-5-视图的删除" class="headerlink" title="11.5 视图的删除"></a>11.5 视图的删除</h2><blockquote>
<p>DROP VIEW  视图名</p>
</blockquote>
<h3 id="11-5-1-删除视图"><a href="#11-5-1-删除视图" class="headerlink" title="11.5.1 删除视图"></a>11.5.1 删除视图</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除t_empInfo</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> t_empInfo</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>注意：==删除视图不会影响原表==</strong></li>
</ul>
<h2 id="11-6-视图的注意事项"><a href="#11-6-视图的注意事项" class="headerlink" title="11.6 视图的注意事项"></a>11.6 视图的注意事项</h2><blockquote>
<ul>
<li>注意：<ul>
<li>视图不会独立存储数据，原表发生改变，视图也发生改变。没有优化任何查询性能。</li>
<li>如果视图包含以下结构中的一种，则视图不可更新<ul>
<li>聚合函数的结果</li>
<li>DISTINCT去重后的结果</li>
<li>GROUP BY 分组后的结果</li>
<li>HAVING 筛选过滤后的结果</li>
<li>UNION、UNION ALL联合后的结果</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="十二、SQL语言分类"><a href="#十二、SQL语言分类" class="headerlink" title="十二、SQL语言分类"></a>十二、SQL语言分类</h1><h2 id="12-1-SQL语言分类"><a href="#12-1-SQL语言分类" class="headerlink" title="12.1 SQL语言分类"></a>12.1 SQL语言分类</h2><blockquote>
<ul>
<li>数据查询语言DQL    (Data Query Language) ：select、where、order by、group by、having</li>
<li>数据定义语言DDL   (Data Definition Language)  :  create、alter、drop</li>
<li>数据操作语言DML  (Data Manipulation Language)  :  insert、update、delete</li>
<li>事务处理语言TPL (Transaction Process Language)  :  commit、rollback</li>
<li>数据控制语言DCL  (Data Control Language)  :  grant、revoke。</li>
</ul>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">邶风</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://xurongchang.github.io/posts/c46f82e8/">https://xurongchang.github.io/posts/c46f82e8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://xurongchang.github.io" target="_blank">邶风の博客 | BEIFENG</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/mysql/">mysql</a><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/03/25/4Kdht3giQJaqlmP.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/e6040b9b/"><img class="prev-cover" data-lazy-src="https://gitee.com/quehua/blogimg/raw/master/img/juqianyi.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Nginx笔记</div></div></a></div><div class="next-post pull-right"><a href="/posts/ffaa379d/"><img class="next-cover" data-lazy-src="https://gitee.com/quehua/blogimg/raw/master/img/20210314230204.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JAVA集合框架</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">邶风</div><div class="author-info__description">如果世界简单一点就好了！</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">26</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div></div><a class="button--animated" id="card-info-btn" href="https://xurongchang.github.io/"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xurongchang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:quehua.hb@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="Rss"><i class="fas fa-rss"></i></a><a class="social-icon" href="/baidusitemap.xml" target="_blank" title="sitemap"><i class="fa fa-sitemap"></i></a><a class="social-icon" href="https://space.bilibili.com/238504519" target="_blank" title="bilibili"><i class="fa fa-desktop"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来到邶风的博客，主要记录学习中的知识点。如果您觉得有用和疑问，欢迎收藏和留言哦！</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%BC%95%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">一、引言</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E7%8E%B0%E6%9C%89%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 现有的数据存储方式有哪些？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E4%BB%A5%E4%B8%8A%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F%E5%AD%98%E5%9C%A8%E5%93%AA%E4%BA%9B%E7%BC%BA%E7%82%B9%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 以上存储方式存在哪些缺点？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.</span> <span class="toc-text">二、数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 数据库的分类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81MySQL"><span class="toc-number">3.</span> <span class="toc-text">三、MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E7%AE%80%E4%BB%8B"><span class="toc-number">3.1.</span> <span class="toc-text">4.1 简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E8%AE%BF%E9%97%AE%E4%B8%8E%E4%B8%8B%E8%BD%BD"><span class="toc-number">3.2.</span> <span class="toc-text">4.2 访问与下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-MySQL-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">3.3.</span> <span class="toc-text">4.3 MySQL 目录结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-MySQL%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.4.</span> <span class="toc-text">4.4 MySQL配置文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81SQL%E8%AF%AD%E8%A8%80"><span class="toc-number">4.</span> <span class="toc-text">四、SQL语言</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E6%A6%82%E5%BF%B5"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-MySQL%E5%BA%94%E7%94%A8"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 MySQL应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="toc-number">4.3.</span> <span class="toc-text">4.3 基本命令</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E3%80%90%E9%87%8D%E7%82%B9%E3%80%91"><span class="toc-number">5.</span> <span class="toc-text">五、数据查询【重点】</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 数据库表的基本结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.2.</span> <span class="toc-text">5.2 基本查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-1-%E6%9F%A5%E8%AF%A2%E9%83%A8%E5%88%86%E5%88%97"><span class="toc-number">5.2.1.</span> <span class="toc-text">5.2.1 查询部分列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-2-%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%88%97"><span class="toc-number">5.2.2.</span> <span class="toc-text">5.2.2 查询所有列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-3-%E5%AF%B9%E5%88%97%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E8%BF%90%E7%AE%97"><span class="toc-number">5.2.3.</span> <span class="toc-text">5.5.3 对列中的数据进行运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-4-%E5%88%97%E7%9A%84%E5%88%AB%E5%90%8D"><span class="toc-number">5.2.4.</span> <span class="toc-text">5.3.4 列的别名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-5-%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E5%8E%BB%E9%87%8D"><span class="toc-number">5.2.5.</span> <span class="toc-text">5.3.5 查询结果去重</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.3.</span> <span class="toc-text">5.3 排序查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-1-%E4%BE%9D%E6%8D%AE%E5%8D%95%E5%88%97%E6%8E%92%E5%BA%8F"><span class="toc-number">5.3.1.</span> <span class="toc-text">5.3.1 依据单列排序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-2-%E4%BE%9D%E6%8D%AE%E5%A4%9A%E5%88%97%E6%8E%92%E5%BA%8F"><span class="toc-number">5.3.2.</span> <span class="toc-text">5.3.2 依据多列排序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.4.</span> <span class="toc-text">5.4 条件查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-1-%E7%AD%89%E5%80%BC%E5%88%A4%E6%96%AD"><span class="toc-number">5.4.1.</span> <span class="toc-text">5.4.1 等值判断(&#x3D;)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-2-%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD-and%E3%80%81or%E3%80%81not"><span class="toc-number">5.4.2.</span> <span class="toc-text">5.4.2 逻辑判断(and、or、not)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-3-%E4%B8%8D%E7%AD%89%E5%80%BC%E5%88%A4%E6%96%AD-gt-%E3%80%81-lt-%E3%80%81-gt-%E3%80%81-lt-%E3%80%81"><span class="toc-number">5.4.3.</span> <span class="toc-text">5.4.3 不等值判断(&gt;、&lt;、&gt;&#x3D;、&lt;&#x3D;、!&#x3D;)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-4-%E5%8C%BA%E9%97%B4%E5%88%A4%E6%96%AD-betwee-and"><span class="toc-number">5.4.4.</span> <span class="toc-text">5.4.4 区间判断(betwee and)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-5-NULL%E5%80%BC%E5%88%A4%E6%96%AD-IS-NULL%E3%80%81IS-NOT-NULL"><span class="toc-number">5.4.5.</span> <span class="toc-text">5.4.5 NULL值判断(IS NULL、IS NOT NULL)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-6-%E6%9E%9A%E4%B8%BE%E6%9F%A5%E8%AF%A2-IN-%E5%80%BC1%EF%BC%8C%E5%80%BC2%EF%BC%8C%E5%80%BC3"><span class="toc-number">5.4.6.</span> <span class="toc-text">5.4.6 枚举查询( IN (值1，值2，值3))</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-7-%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.4.7.</span> <span class="toc-text">5.4.7 模糊查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-8-%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.4.8.</span> <span class="toc-text">5.4.8 分支结构查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-5-%E6%97%B6%E9%97%B4%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.5.</span> <span class="toc-text">5.5 时间查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5-1-%E8%8E%B7%E5%BE%97%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4"><span class="toc-number">5.5.1.</span> <span class="toc-text">5.5.1 获得当前系统时间</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.6.</span> <span class="toc-text">5.6 字符串查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%BA%94%E7%94%A8"><span class="toc-number">5.6.1.</span> <span class="toc-text">5.6.1 字符串应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-7-%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">5.7.</span> <span class="toc-text">5.7 聚合函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-1-%E5%8D%95%E5%88%97%E6%80%BB%E5%92%8C"><span class="toc-number">5.7.1.</span> <span class="toc-text">5.7.1 单列总和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-2-%E5%8D%95%E5%88%97%E5%B9%B3%E5%9D%87%E5%80%BC"><span class="toc-number">5.7.2.</span> <span class="toc-text">5.7.2 单列平均值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-3-%E5%8D%95%E5%88%97%E6%9C%80%E5%A4%A7%E5%80%BC"><span class="toc-number">5.7.3.</span> <span class="toc-text">5.7.3 单列最大值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-4-%E5%8D%95%E5%88%97%E6%9C%80%E5%B0%8F%E5%80%BC"><span class="toc-number">5.7.4.</span> <span class="toc-text">5.7.4 单列最小值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7-5-%E6%80%BB%E8%A1%8C%E6%95%B0"><span class="toc-number">5.7.5.</span> <span class="toc-text">5.7.5 总行数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-8-%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.8.</span> <span class="toc-text">5.8 分组查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-1-%E6%9F%A5%E8%AF%A2%E5%90%84%E9%83%A8%E9%97%A8%E7%9A%84%E6%80%BB%E4%BA%BA%E6%95%B0"><span class="toc-number">5.8.1.</span> <span class="toc-text">5.8.1 查询各部门的总人数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-2-%E6%9F%A5%E8%AF%A2%E5%90%84%E9%83%A8%E9%97%A8%E7%9A%84%E5%B9%B3%E5%9D%87%E5%B7%A5%E8%B5%84"><span class="toc-number">5.8.2.</span> <span class="toc-text">5.8.2 查询各部门的平均工资</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-3-%E6%9F%A5%E8%AF%A2%E5%90%84%E4%B8%AA%E9%83%A8%E9%97%A8%E3%80%81%E5%90%84%E4%B8%AA%E5%B2%97%E4%BD%8D%E7%9A%84%E4%BA%BA%E6%95%B0"><span class="toc-number">5.8.3.</span> <span class="toc-text">5.8.3 查询各个部门、各个岗位的人数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8-4-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-number">5.8.4.</span> <span class="toc-text">5.8.4 常见问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-9-%E5%88%86%E7%BB%84%E8%BF%87%E6%BB%A4%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.9.</span> <span class="toc-text">5.9 分组过滤查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-9-1-%E7%BB%9F%E8%AE%A1%E9%83%A8%E9%97%A8%E7%9A%84%E6%9C%80%E9%AB%98%E5%B7%A5%E8%B5%84"><span class="toc-number">5.9.1.</span> <span class="toc-text">5.9.1 统计部门的最高工资</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-10-%E9%99%90%E5%AE%9A%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.10.</span> <span class="toc-text">5.10 限定查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-10-1-%E6%9F%A5%E8%AF%A2%E5%89%8D5%E8%A1%8C%E8%AE%B0%E5%BD%95"><span class="toc-number">5.10.1.</span> <span class="toc-text">5.10.1 查询前5行记录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-10-2-limit%E5%85%B8%E5%9E%8B%E5%BA%94%E7%94%A8"><span class="toc-number">5.10.2.</span> <span class="toc-text">5.10.2 limit典型应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-11-%E6%9F%A5%E8%AF%A2%E6%80%BB%E7%BB%93"><span class="toc-number">5.11.</span> <span class="toc-text">5.11 查询总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-11-1-SQL-%E8%AF%AD%E5%8F%A5%E7%BC%96%E5%86%99%E9%A1%BA%E5%BA%8F"><span class="toc-number">5.11.1.</span> <span class="toc-text">5.11.1 SQL 语句编写顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-11-2-SQL%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">5.11.2.</span> <span class="toc-text">5.11.2 SQL语句执行顺序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-12-%E5%AD%90%E6%9F%A5%E8%AF%A2-%E4%BD%9C%E4%B8%BA%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-number">5.12.</span> <span class="toc-text">5.12 子查询(作为条件判断)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-12-1-%E6%9F%A5%E8%AF%A2%E5%B7%A5%E8%B5%84%E5%A4%A7%E4%BA%8EBruce-%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-number">5.12.1.</span> <span class="toc-text">5.12.1 查询工资大于Bruce 的员工信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-13-%E5%AD%90%E6%9F%A5%E8%AF%A2-%E4%BD%9C%E4%B8%BA%E6%9E%9A%E4%B8%BE%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6"><span class="toc-number">5.13.</span> <span class="toc-text">5.13 子查询(作为枚举查询条件)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-13-1-%E6%9F%A5%E8%AF%A2%E4%B8%8E%E5%90%8D%E4%B8%BA%E2%80%99King%E2%80%99%E5%90%8C%E4%B8%80%E9%83%A8%E9%97%A8%E7%9A%84%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-number">5.13.1.</span> <span class="toc-text">5.13.1 查询与名为’King’同一部门的员工信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-13-2-%E5%B7%A5%E8%B5%84%E9%AB%98%E4%BA%8E60%E9%83%A8%E9%97%A8%E6%89%80%E6%9C%89%E4%BA%BA%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">5.13.2.</span> <span class="toc-text">5.13.2 工资高于60部门所有人的信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-14-%E5%AD%90%E6%9F%A5%E8%AF%A2-%E4%BD%9C%E4%B8%BA%E4%B8%80%E5%BC%A0%E8%A1%A8"><span class="toc-number">5.14.</span> <span class="toc-text">5.14 子查询(作为一张表)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-15-%E5%90%88%E5%B9%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.15.</span> <span class="toc-text">5.15 合并查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-15-1-%E5%90%88%E5%B9%B6%E4%B8%A4%E5%BC%A0%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%9C-%E5%8E%BB%E9%99%A4%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95"><span class="toc-number">5.15.1.</span> <span class="toc-text">5.15.1 合并两张表的结果(去除重复记录)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-15-2-%E5%90%88%E5%B9%B6%E4%B8%A4%E5%BC%A0%E8%A1%A8%E7%9A%84%E7%BB%93%E6%9E%9C-%E4%BF%9D%E7%95%99%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95"><span class="toc-number">5.15.2.</span> <span class="toc-text">5.15.2 合并两张表的结果(保留重复记录)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-16-%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.16.</span> <span class="toc-text">5.16 表连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-16-1-%E5%86%85%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2-inner-join-on"><span class="toc-number">5.16.1.</span> <span class="toc-text">5.16.1 内连接查询( inner join on )</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-16-2-%E4%B8%89%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.16.2.</span> <span class="toc-text">5.16.2 三表连接查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-16-3-%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5-left-join-on"><span class="toc-number">5.16.3.</span> <span class="toc-text">5.16.3 左外连接( left join on )</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-16-4-%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5-right-join-on"><span class="toc-number">5.16.4.</span> <span class="toc-text">5.16.4 右外连接 (right join on )</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81DML%E6%93%8D%E4%BD%9C"><span class="toc-number">6.</span> <span class="toc-text">六、DML操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E6%96%B0%E5%A2%9E-insert"><span class="toc-number">6.1.</span> <span class="toc-text">6.1 新增(insert)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-%E6%B7%BB%E5%8A%A0%E4%B8%80%E6%9D%A1%E4%BF%A1%E6%81%AF"><span class="toc-number">6.1.1.</span> <span class="toc-text">6.1.1 添加一条信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E4%BF%AE%E6%94%B9-update"><span class="toc-number">6.2.</span> <span class="toc-text">6.2 修改(update)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1-%E4%BF%AE%E6%94%B9%E4%B8%80%E6%9D%A1%E4%BF%A1%E6%81%AF"><span class="toc-number">6.2.1.</span> <span class="toc-text">6.2.1 修改一条信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E5%88%A0%E9%99%A4-delete"><span class="toc-number">6.3.</span> <span class="toc-text">6.3 删除(delete)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-%E6%B8%85%E7%A9%BA%E6%95%B4%E8%A1%A8%E6%95%B0%E6%8D%AE-truncate"><span class="toc-number">6.4.</span> <span class="toc-text">6.4 清空整表数据( truncate )</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-1-%E6%B8%85%E7%A9%BA%E6%95%B4%E5%BC%A0%E8%A1%A8"><span class="toc-number">6.4.1.</span> <span class="toc-text">6.4.1 清空整张表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%95%B0%E6%8D%AE%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">7.</span> <span class="toc-text">七、数据表操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">7.1.</span> <span class="toc-text">7.1 数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-1-%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-number">7.1.1.</span> <span class="toc-text">7.1.1 数值类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-2-%E6%97%A5%E6%9C%9F%E7%B1%BB%E5%9E%8B"><span class="toc-number">7.1.2.</span> <span class="toc-text">7.1.2 日期类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-3-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="toc-number">7.1.3.</span> <span class="toc-text">7.1.3 字符串类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E5%88%9B%E5%BB%BA-creata"><span class="toc-number">7.2.</span> <span class="toc-text">7.2 数据表的创建( creata )</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E4%BF%AE%E6%94%B9-alter"><span class="toc-number">7.3.</span> <span class="toc-text">7.3 数据表的修改(alter)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-1-%E5%90%91%E7%8E%B0%E6%9C%89%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%88%97"><span class="toc-number">7.3.1.</span> <span class="toc-text">7.3.1 向现有中添加列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-2-%E4%BF%AE%E6%94%B9%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%88%97"><span class="toc-number">7.3.2.</span> <span class="toc-text">7.3.2 修改表中的列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-3-%E5%88%A0%E9%99%A4%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%88%97"><span class="toc-number">7.3.3.</span> <span class="toc-text">7.3.3 删除表中的列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-4-%E4%BF%AE%E6%94%B9%E5%88%97%E5%90%8D"><span class="toc-number">7.3.4.</span> <span class="toc-text">7.3.4 修改列名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-5-%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%90%8D"><span class="toc-number">7.3.5.</span> <span class="toc-text">7.3.5 修改表名</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-%E6%95%B0%E6%8D%AE%E8%A1%A8%E7%9A%84%E5%88%A0%E9%99%A4-drop"><span class="toc-number">7.4.</span> <span class="toc-text">7.4 数据表的删除( drop )</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-1-%E5%88%A0%E9%99%A4%E5%AD%A6%E7%94%9F%E8%A1%A8"><span class="toc-number">7.4.1.</span> <span class="toc-text">7.4.1 删除学生表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E7%BA%A6%E6%9D%9F"><span class="toc-number">8.</span> <span class="toc-text">八、约束</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E5%AE%9E%E4%BD%93%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">8.1.</span> <span class="toc-text">8.1 实体完整性约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-1-%E4%B8%BB%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">8.1.1.</span> <span class="toc-text">8.1.1 主键约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-2-%E5%94%AF%E4%B8%80%E7%BA%A6%E6%9D%9F"><span class="toc-number">8.1.2.</span> <span class="toc-text">8.1.2 唯一约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-3-%E8%87%AA%E5%8A%A8%E5%A2%9E%E9%95%BF%E5%88%97"><span class="toc-number">8.1.3.</span> <span class="toc-text">8.1.3 自动增长列</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E5%9F%9F%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">8.2.</span> <span class="toc-text">8.2 域完整性约束</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-1-%E9%9D%9E%E7%A9%BA%E7%BA%A6%E6%9D%9F"><span class="toc-number">8.2.1.</span> <span class="toc-text">8.2.1 非空约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-2-%E9%BB%98%E8%AE%A4%E5%80%BC%E7%BA%A6%E6%9D%9F"><span class="toc-number">8.2.2.</span> <span class="toc-text">8.2.2 默认值约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-3-%E5%BC%95%E7%94%A8%E5%AE%8C%E6%95%B4%E6%80%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">8.2.3.</span> <span class="toc-text">8.2.3 引用完整性约束</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-%E7%BA%A6%E6%9D%9F%E5%88%9B%E5%BB%BA%E6%95%B4%E5%90%88"><span class="toc-number">8.3.</span> <span class="toc-text">8.3 约束创建整合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-1-%E5%88%9B%E5%BB%BA%E8%A1%A8"><span class="toc-number">8.3.1.</span> <span class="toc-text">8.3.1 创建表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E4%BA%8B%E5%8A%A1"><span class="toc-number">9.</span> <span class="toc-text">九、事务</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E6%A8%A1%E6%8B%9F%E8%BD%AC%E8%B4%A6"><span class="toc-number">9.1.</span> <span class="toc-text">9.1 模拟转账</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A8%A1%E6%8B%9F%E8%BD%AC%E8%B4%A6"><span class="toc-number">9.1.1.</span> <span class="toc-text">9.1.1 数据库模拟转账</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-2-%E6%A8%A1%E6%8B%9F%E8%BD%AC%E8%B4%A6%E9%94%99%E8%AF%AF"><span class="toc-number">9.1.2.</span> <span class="toc-text">9.1.2 模拟转账错误</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E4%BA%8B%E5%8A%A1%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">9.2.</span> <span class="toc-text">9.2 事务的概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-%E4%BA%8B%E5%8A%A1%E7%9A%84%E8%BE%B9%E7%95%8C"><span class="toc-number">9.3.</span> <span class="toc-text">9.3 事务的边界</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4-%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">9.4.</span> <span class="toc-text">9.4 事务的原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-5-%E4%BA%8B%E5%8A%A1%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">9.5.</span> <span class="toc-text">9.5 事务的特性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-6-%E4%BA%8B%E5%8A%A1%E5%BA%94%E7%94%A8"><span class="toc-number">9.6.</span> <span class="toc-text">9.6 事务应用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-1-%E4%BA%8B%E5%8A%A1%E5%AE%8C%E6%88%90%E8%BD%AC%E8%B4%A6"><span class="toc-number">9.6.1.</span> <span class="toc-text">9.6.1 事务完成转账</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">10.</span> <span class="toc-text">十、权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">10.1.</span> <span class="toc-text">10.1 创建用户</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-1-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%94%A8%E6%88%B7"><span class="toc-number">10.1.1.</span> <span class="toc-text">10.1.1 创建一个用户</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-%E6%8E%88%E6%9D%83"><span class="toc-number">10.2.</span> <span class="toc-text">10.2 授权</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-1-%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83"><span class="toc-number">10.2.1.</span> <span class="toc-text">10.2.1 用户授权</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3-%E6%92%A4%E9%94%80%E6%9D%83%E9%99%90"><span class="toc-number">10.3.</span> <span class="toc-text">10.3 撤销权限</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-1-%E6%92%A4%E9%94%80%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90"><span class="toc-number">10.3.1.</span> <span class="toc-text">10.3.1 撤销用户权限</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-4-%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-number">10.4.</span> <span class="toc-text">10.4 删除用户</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-1-%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-number">10.4.1.</span> <span class="toc-text">10.4.1 删除用户</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E8%A7%86%E5%9B%BE"><span class="toc-number">11.</span> <span class="toc-text">十一、视图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-%E6%A6%82%E5%BF%B5"><span class="toc-number">11.1.</span> <span class="toc-text">11.1 概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-%E8%A7%86%E5%9B%BE%E7%89%B9%E7%82%B9"><span class="toc-number">11.2.</span> <span class="toc-text">11.2 视图特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3-%E8%A7%86%E5%9B%BE%E7%9A%84%E5%88%9B%E5%BB%BA"><span class="toc-number">11.3.</span> <span class="toc-text">11.3 视图的创建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-1-%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE"><span class="toc-number">11.3.1.</span> <span class="toc-text">11.3.1 创建视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-2-%E4%BD%BF%E7%94%A8%E8%A7%86%E5%9B%BE"><span class="toc-number">11.3.2.</span> <span class="toc-text">11.3.2 使用视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-4-%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">11.4.</span> <span class="toc-text">11.4 视图的修改</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-1-%E4%BF%AE%E6%94%B9%E8%A7%86%E5%9B%BE"><span class="toc-number">11.4.1.</span> <span class="toc-text">11.4.1 修改视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-5-%E8%A7%86%E5%9B%BE%E7%9A%84%E5%88%A0%E9%99%A4"><span class="toc-number">11.5.</span> <span class="toc-text">11.5 视图的删除</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-5-1-%E5%88%A0%E9%99%A4%E8%A7%86%E5%9B%BE"><span class="toc-number">11.5.1.</span> <span class="toc-text">11.5.1 删除视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-6-%E8%A7%86%E5%9B%BE%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">11.6.</span> <span class="toc-text">11.6 视图的注意事项</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81SQL%E8%AF%AD%E8%A8%80%E5%88%86%E7%B1%BB"><span class="toc-number">12.</span> <span class="toc-text">十二、SQL语言分类</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1-SQL%E8%AF%AD%E8%A8%80%E5%88%86%E7%B1%BB"><span class="toc-number">12.1.</span> <span class="toc-text">12.1 SQL语言分类</span></a></li></ol></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/e6040b9b/" title="Nginx笔记"><img data-lazy-src="https://gitee.com/quehua/blogimg/raw/master/img/juqianyi.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nginx笔记"/></a><div class="content"><a class="title" href="/posts/e6040b9b/" title="Nginx笔记">Nginx笔记</a><time datetime="2021-03-29T07:17:17.000Z" title="发表于 2021-03-29 15:17:17">2021-03-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c46f82e8/" title="MySQL数据库总结"><img data-lazy-src="https://i.loli.net/2021/03/25/4Kdht3giQJaqlmP.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL数据库总结"/></a><div class="content"><a class="title" href="/posts/c46f82e8/" title="MySQL数据库总结">MySQL数据库总结</a><time datetime="2021-03-25T13:25:40.000Z" title="发表于 2021-03-25 21:25:40">2021-03-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ffaa379d/" title="JAVA集合框架"><img data-lazy-src="https://gitee.com/quehua/blogimg/raw/master/img/20210314230204.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JAVA集合框架"/></a><div class="content"><a class="title" href="/posts/ffaa379d/" title="JAVA集合框架">JAVA集合框架</a><time datetime="2021-03-12T06:34:02.000Z" title="发表于 2021-03-12 14:34:02">2021-03-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/276e22e/" title="2020年度总结"><img data-lazy-src="https://gitee.com/quehua/blogimg/raw/master/img/20210314211317.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2020年度总结"/></a><div class="content"><a class="title" href="/posts/276e22e/" title="2020年度总结">2020年度总结</a><time datetime="2020-12-31T12:23:31.000Z" title="发表于 2020-12-31 20:23:31">2020-12-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d9ecfaf6/" title="为windows terminal加上右键菜单"><img data-lazy-src="https://gitee.com/quehua/blogimg/raw/master/img/gqapi.php" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="为windows terminal加上右键菜单"/></a><div class="content"><a class="title" href="/posts/d9ecfaf6/" title="为windows terminal加上右键菜单">为windows terminal加上右键菜单</a><time datetime="2020-12-21T13:12:33.000Z" title="发表于 2020-12-21 21:12:33">2020-12-21</time></div></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://i.loli.net/2021/03/25/4Kdht3giQJaqlmP.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By 邶风</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://xurongchang.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'gJSo6h4nPOdXOlxu0YT5CoAn-gzGzoHsz',
      appKey: 'EmWNKCg373rEpSYKUktd7skC',
      placeholder: '说点什么吧...',
      avatar: 'monsterid',
      meta: '昵称,邮箱,网址'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('昵称,邮箱'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign({}, initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script></div></body></html>